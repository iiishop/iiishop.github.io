import{r as v,i as _,f as A,j as D,b as I,o as $,e as p,t as E,m as S,O as V,s as W,h,v as q,l as j,u as w,a as U,F as X,k as R,c as G,U as J}from"./entry-index-DYwYFgky.js";import{_ as F}from"./chunk-_plugin-vue_export-helper-DlAUqK2U.js";import"./chunk-mermaid-lib--N4Maba6.js";const K={class:"typewriter-text"},Q={__name:"TypewriterText",props:{texts:{type:Array,required:!0,default:()=>[""]},color:{type:String,default:"#ffffff"},typingSpeed:{type:Number,default:100},deletingSpeed:{type:Number,default:50},pauseDuration:{type:Number,default:2e3}},setup(k){const n=k,f=v(""),x=v(0),r=v(!1),d=v(0);let i=null;const M=_(()=>n.texts[x.value]||""),g=()=>{const b=M.value;r.value?d.value>0?(d.value--,f.value=b.substring(0,d.value),i=setTimeout(g,n.deletingSpeed)):(r.value=!1,x.value=(x.value+1)%n.texts.length,i=setTimeout(g,500)):d.value<b.length?(f.value=b.substring(0,d.value+1),d.value++,i=setTimeout(g,n.typingSpeed)):i=setTimeout(()=>{if(n.texts.length>1)r.value=!0,g();else return},n.pauseDuration)};return A(()=>{g()}),D(()=>{i&&clearTimeout(i)}),(b,P)=>($(),I("div",K,[p("span",{class:"text-content",style:S({color:k.color})},E(f.value),5),p("span",{class:"cursor",style:S({backgroundColor:k.color})},"|",4)]))}},N=F(Q,[["__scopeId","data-v-0bf34cf9"]]),Z=["data-theme"],ee={class:"hero-content"},te={key:0,class:"hero-bottom-panels"},ae=V({name:"HeroSection",components:{TypewriterText:N}}),se=Object.assign(ae,{setup(k){const n=v(0),f=v(0),x=v(!1),r=v(null);let d=null,i=[];const M=_(()=>W.currentTheme.value),g=()=>{n.value=window.scrollY},b=_(()=>{const t=f.value,e=Math.min(n.value/t,1);return{filter:`blur(${h.BackgroundImgBlur*e}px)`}}),P=_(()=>{const t=f.value,e=Math.min(n.value/t,1);return{opacity:h.BackgroundImgOpacity*e}}),B=_(()=>{const t=f.value,e=Math.min(n.value/t,1),a=n.value*.5,c=.5,o=e<c?1:1-(e-c)/(1-c);return{transform:`translateY(${a}px)`,opacity:o}}),z=_(()=>{const t=B.value;return{color:s.value.main,textShadow:`
            0 0 10px ${s.value.shadow},
            0 0 20px ${s.value.shadow},
            0 0 30px ${s.value.shadow},
            0 0 40px ${s.value.shadow},
            2px 2px 4px rgba(0,0,0,0.8),
            -2px -2px 4px rgba(255,255,255,0.3)
        `,transform:t.transform,opacity:t.opacity}}),s=v({main:"#ffffff",shadow:"#000000"});class Y{constructor(e,a){this.x=Math.random()*e,this.y=Math.random()*a,this.size=Math.random()*4+2,this.speedX=Math.random()*1.5-.75,this.speedY=Math.random()*1.5-.75,this.opacity=Math.random()*.4+.6}update(e,a){this.x+=this.speedX,this.y+=this.speedY,this.x>e&&(this.x=0),this.x<0&&(this.x=e),this.y>a&&(this.y=0),this.y<0&&(this.y=a)}draw(e,a){e.shadowBlur=15,e.shadowColor=a,e.fillStyle=a,e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.globalAlpha=1}}A(()=>{f.value=window.innerHeight,window.addEventListener("scroll",g),O(),setTimeout(()=>{L(),H()},300)}),D(()=>{window.removeEventListener("scroll",g),d&&cancelAnimationFrame(d)});const L=()=>{if(!r.value||x.value)return;const t=r.value;t.width=window.innerWidth,t.height=window.innerHeight,i=[];const e=window.innerWidth<768?60:120;for(let a=0;a<e;a++)i.push(new Y(t.width,t.height));x.value=!0},H=()=>{if(!r.value)return;const t=r.value,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height);let a;const c=M.value;s.value.main!=="#ffffff"&&s.value.main!=="#000000"?(a=s.value.main.includes("rgb")?s.value.main.replace("rgb","rgba").replace(")",", 0.9)"):s.value.main+"E6",s.value.main):c==="dark"||c==="night"?a="rgba(167, 139, 250, 0.9)":a="rgba(102, 126, 234, 0.9)",i.forEach(o=>{o.update(t.width,t.height),o.draw(e,a)}),i.forEach((o,m)=>{i.slice(m+1).forEach(l=>{const u=o.x-l.x,y=o.y-l.y,C=Math.sqrt(u*u+y*y);C<200&&(e.strokeStyle=a,e.lineWidth=1.5,e.globalAlpha=(1-C/200)*.5,e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(l.x,l.y),e.stroke(),e.globalAlpha=1)})}),d=requestAnimationFrame(H)};window.addEventListener("resize",()=>{r.value&&(r.value.width=window.innerWidth,r.value.height=window.innerHeight)}),q(M,()=>{});const O=()=>{const t=new Image;t.crossOrigin="Anonymous",t.src=h.HeroBackgroundImg||h.BackgroundImg,t.onload=()=>{const e=document.createElement("canvas"),a=e.getContext("2d");e.width=t.width,e.height=t.height,a.drawImage(t,0,0);try{const o=a.getImageData(0,0,e.width,e.height).data;let m=0,l=0,u=0,y=0;for(let T=0;T<o.length;T+=40)m+=o[T],l+=o[T+1],u+=o[T+2],y++;m=Math.floor(m/y),l=Math.floor(l/y),u=Math.floor(u/y),(m*299+l*587+u*114)/1e3<128?(s.value.main=`rgb(${Math.min(255,m+100)}, ${Math.min(255,l+100)}, ${Math.min(255,u+100)})`,s.value.shadow=`rgb(${m}, ${l}, ${u})`):(s.value.main=`rgb(${m}, ${l}, ${u})`,s.value.shadow=`rgb(${Math.max(0,m-100)}, ${Math.max(0,l-100)}, ${Math.max(0,u-100)})`)}catch(c){console.warn("无法提取背景图片颜色，使用默认颜色",c)}},t.onerror=()=>{console.warn("背景图片加载失败，使用默认颜色")}};return(t,e)=>($(),I("div",{class:"hero-section","data-theme":M.value},[p("div",{class:"hero-background-blur",style:S(b.value)},null,4),p("div",{class:"hero-overlay",style:S(P.value)},null,4),p("canvas",{ref_key:"particleCanvas",ref:r,class:"particles-canvas"},null,512),p("div",ee,[p("h1",{class:"hero-title",style:S(z.value)},E(w(h).HeroTitle||w(h).BlogName),5),p("div",{class:"hero-subtitle-container",style:S(B.value)},[U(N,{texts:w(h).HeroSubtitles||[w(h).ShortDesc],color:s.value.main},null,8,["texts","color"])],4)]),w(h).HeroPanels&&w(h).HeroPanels.length>0?($(),I("div",te,[($(!0),I(X,null,R(w(h).HeroPanels,(a,c)=>($(),G(J(a),{key:c}))),128))])):j("",!0)],8,Z))}}),re=F(se,[["__scopeId","data-v-43f7e67a"]]);export{re as default};
