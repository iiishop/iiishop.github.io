import{r as p,i as j,f as Q,b as i,o as c,e,q as C,t as m,G as X,D as tt,F as et,m as at,y as st,g as T}from"./entry-index-B2fPASMk.js";import{_ as ot}from"./chunk-_plugin-vue_export-helper-DlAUqK2U.js";const rt={key:0,class:"terminal-loader"},lt={key:1,class:"error-slate"},nt=["href"],it={key:2,class:"repo-card"},ct=["title"],ut={class:"cache-time"},dt=["title"],vt={key:0,class:"rate-time"},pt={class:"flex-layout"},ft={class:"main-info"},ht={class:"repo-header"},mt={class:"owner-chip"},gt={class:"repo-name"},_t=["href"],bt={class:"repo-bio"},yt={class:"repo-meta-strip"},xt={class:"meta-item star"},kt={class:"meta-item fork"},wt={key:0,class:"meta-item language"},St={class:"visual-panel"},Lt={class:"activity-section"},Et={class:"heartbeat-container"},Mt={viewBox:"0 0 100 20",preserveAspectRatio:"none",class:"heartbeat-svg"},Rt=["d"],At=["d"],It=["d"],Ct=["d"],Dt={class:"growth-section"},Nt={class:"sparkline"},$t={viewBox:"0 0 120 30",class:"spark-svg"},Tt=["d"],Ot=["d"],Pt={class:"repo-footer"},Bt={class:"contributors"},Gt={class:"contributor-stack"},Ft=["src","title"],Zt=["title","aria-label"],Vt={__name:"GithubRepoBlock",props:{repourl:String},setup(J){const O=J,r=p(null),b=p([]),f=p([]),S=p(!1),h=p(0),L=p(!0),E=p(!1),k=p(!1),D=p(null),M=(a=>{try{const t=new URL(a).pathname.split("/").filter(Boolean);if(t.length>=2)return{owner:t[0],repo:t[1]}}catch{return null}return null})(O.repourl);M&&(r.value={name:M.repo,owner:{login:M.owner},description:"Syncing repository metadata...",stargazers_count:0,forks_count:0,html_url:O.repourl,created_at:new Date().toISOString()});const G=(a,t)=>`gh_cache_${a}_${t}`,K=(a,t,o)=>{localStorage.setItem(G(a,t),JSON.stringify({timestamp:new Date().getTime(),data:o}))},P=(a,t)=>{const o=localStorage.getItem(G(a,t));if(!o)return null;try{return JSON.parse(o)}catch{return null}},F=(a,t)=>`gh_etag_${a}_${t}`,W=(a,t)=>localStorage.getItem(F(a,t)),Z=(a,t,o)=>{if(o)try{localStorage.setItem(F(a,t),o)}catch{}},B=p(!1),w=p(null),V=a=>!a&&a!==0?"0":a>=1e3?(a/1e3).toFixed(1)+"k":a,H=j(()=>{if(!r.value)return"";const a=[],t=120,o=30,n=r.value.id||0;new Date(r.value.created_at);const g=u=>Math.abs(Math.sin(n+u)*1e3)%1;for(let u=0;u<=20;u++){const d=u/20*t,y=u/20,_=.3+g(1)*.4,R=8+g(2)*10;let A=1/(1+Math.exp(-R*(y-_)));A=A*.85+y*.15;const x=(g(u)-.5)*2,I=o-(A*(o-10)+5)+x;a.push(`${d},${I}`)}return`M 0,${o} L ${a.join(" L ")} L ${t},${o} Z`}),N=j(()=>{if(!b.value.length)return"M 0,15 L 100,15";const a=Math.max(...b.value,1);return`M ${b.value.map((o,n)=>{const g=n/(b.value.length-1)*100,u=18-o/a*16;return`${g.toFixed(2)},${u.toFixed(2)}`}).join(" L ")}`}),q=async()=>{var u;if(!M){E.value=!0,L.value=!1;return}const{owner:a,repo:t}=M,o=`https://api.github.com/repos/${a}/${t}`,n=P(a,t);n&&(r.value=n.data.repoData,b.value=n.data.commitStats,f.value=n.data.contributors,S.value=n.data.contributorsHasMore,h.value=n.data.contributorsExtraCount,k.value=!0,D.value=new Date(n.timestamp).toLocaleString(),L.value=!1);const g=async(d,y=3)=>{try{const _=await T.get(d);return _.status===202&&y>0?(await new Promise(R=>setTimeout(R,2e3)),g(d,y-1)):_.data}catch(_){throw _}};try{const d=W(a,t),y=T.get(o,{headers:d?{"If-None-Match":d}:{}}),_=T.get(`${o}/contributors`,{params:{per_page:6},headers:d?{"If-None-Match":d}:{}}),R=g(`${o}/stats/commit_activity`),A=await Promise.allSettled([y,R,_]),[x,I,U]=A;if(x.status==="fulfilled"){const s=x.value;if(s.status===200&&s.data)r.value=s.data,Z(a,t,s.headers&&(s.headers.etag||s.headers.Etag));else if(s.status===304){const l=P(a,t);l&&(r.value=l.data.repoData,k.value=!0,D.value=new Date(l.timestamp).toLocaleString())}if(s.headers){const l=s.headers["x-ratelimit-remaining"],$=s.headers["x-ratelimit-reset"];l!==void 0&&Number(l)<=0&&(B.value=!0,w.value=$?new Date(Number($)*1e3).toLocaleString():null)}}else{const s=x.reason;if(((u=s==null?void 0:s.response)==null?void 0:u.status)===403){B.value=!0;const v=(s.response.headers||{})["x-ratelimit-reset"];w.value=v?new Date(Number(v)*1e3).toLocaleString():null,k.value||(r.value.description="API Rate Limit Exceeded. Using static data.")}else k.value||(E.value=!0)}if(I.status==="fulfilled"){const s=Array.isArray(I.value)?I.value.slice(-12):[];b.value=s.flatMap(l=>l.days)}if(U.status==="fulfilled"){const s=U.value;if(s.status===200){const v=Array.isArray(s.data)?s.data:[];f.value=v.slice(0,6),Z(a,t,s.headers&&(s.headers.etag||s.headers.Etag))}else if(s.status===304){const v=P(a,t);v&&(f.value=v.data.contributors||[])}let l=null;if(s.headers&&s.headers.link)try{const v=await T.get(`${o}/contributors`,{params:{per_page:1}}),z=v.headers&&v.headers.link;if(z){const Y=z.match(/[?&]page=(\d+)[^>]*>;\s*rel="last"/);Y&&(l=parseInt(Y[1],10))}}catch{}l!==null?(S.value=l>f.value.length,h.value=Math.max(0,l-f.value.length)):S.value=(f.value&&f.value.length)>=6}x.status==="fulfilled"&&x.value.status===200&&(k.value=!1,K(a,t,{repoData:r.value,commitStats:b.value,contributors:f.value,contributorsHasMore:S.value,contributorsExtraCount:h.value}))}catch(d){console.error("GitHub API Error:",d),r.value||(E.value=!0)}finally{L.value=!1}};return Q(()=>q()),(a,t)=>(c(),i("div",{class:st(["repo-embed-container",{"is-loading":L.value,"is-error":E.value}])},[L.value?(c(),i("div",rt,t[0]||(t[0]=[e("div",{class:"cursor"},null,-1),e("span",null,"ANALYZING_CORE_REPOSITORY...",-1)]))):E.value?(c(),i("div",lt,[t[1]||(t[1]=e("div",{class:"error-icon"},"!",-1)),t[2]||(t[2]=e("div",{class:"error-text"},"REPOSITORY_ACCESS_DENIED",-1)),e("a",{href:O.repourl,target:"_blank",class:"emergency-link"},"MANUAL_ACCESS",8,nt)])):(c(),i("div",it,[t[15]||(t[15]=e("div",{class:"card-accent-line"},null,-1)),k.value?(c(),i("div",{key:0,class:"cache-indicator",title:"Last updated: "+D.value},[t[3]||(t[3]=e("span",{class:"cache-label"},"OFFLINE_CACHE",-1)),e("span",ut,m(D.value),1)],8,ct)):C("",!0),B.value?(c(),i("div",{key:1,class:"rate-indicator",title:w.value?"Rate limit resets: "+w.value:"Rate limited"},[t[4]||(t[4]=e("span",{class:"rate-label"},"RATE_LIMITED",-1)),w.value?(c(),i("span",vt,m(w.value),1)):C("",!0)],8,dt)):C("",!0),e("div",pt,[e("div",ft,[e("header",ht,[e("div",mt,[t[5]||(t[5]=e("span",{class:"prefix"},"@",-1)),X(m(r.value.owner.login),1)]),e("h3",gt,[e("a",{href:r.value.html_url,target:"_blank"},m(r.value.name),9,_t)])]),e("p",bt,m(r.value.description||"No description provided for this stream."),1),e("div",yt,[e("div",xt,[t[6]||(t[6]=e("svg",{class:"icon",viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor"},[e("path",{d:"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Z"})],-1)),e("span",null,m(V(r.value.stargazers_count)),1)]),e("div",kt,[t[7]||(t[7]=e("svg",{class:"icon",viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor"},[e("path",{d:"M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 10a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"})],-1)),e("span",null,m(V(r.value.forks_count)),1)]),r.value.language?(c(),i("div",wt,[t[8]||(t[8]=e("span",{class:"lang-dot"},null,-1)),e("span",null,m(r.value.language),1)])):C("",!0)])]),e("div",St,[e("div",Lt,[t[10]||(t[10]=e("div",{class:"section-label"},"COMMIT_PULSE (84D)",-1)),e("div",Et,[(c(),i("svg",Mt,[t[9]||(t[9]=tt('<defs data-v-1545da05><linearGradient id="line-grad" x1="0%" y1="0%" x2="100%" y2="0%" data-v-1545da05><stop offset="0%" stop-color="#44d07a" data-v-1545da05></stop><stop offset="100%" stop-color="#4aa9ff" data-v-1545da05></stop></linearGradient><linearGradient id="area-grad" x1="0%" y1="0%" x2="0%" y2="100%" data-v-1545da05><stop offset="0%" stop-color="#44d07a" stop-opacity="0.45" data-v-1545da05></stop><stop offset="100%" stop-color="#44d07a" stop-opacity="0" data-v-1545da05></stop></linearGradient><mask id="scan-mask" data-v-1545da05><rect width="30%" height="100%" x="-30%" fill="white" class="mask-rect" data-v-1545da05></rect></mask></defs>',1)),e("path",{d:N.value+" L 100,20 L 0,20 Z",fill:"url(#area-grad)",class:"heartbeat-area"},null,8,Rt),e("path",{d:N.value,fill:"none",class:"heartbeat-bg-line"},null,8,At),e("path",{d:N.value,fill:"none",class:"heartbeat-line",stroke:"url(#line-grad)"},null,8,It),e("path",{d:N.value,fill:"none",class:"heartbeat-scan",stroke:"#fff",mask:"url(#scan-mask)"},null,8,Ct)]))])]),e("div",Dt,[t[13]||(t[13]=e("div",{class:"section-label"},"STAR_MOMENTUM",-1)),e("div",Nt,[(c(),i("svg",$t,[t[11]||(t[11]=e("defs",null,[e("linearGradient",{id:"star-grad",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"#4aa9ff","stop-opacity":"0.35"}),e("stop",{offset:"100%","stop-color":"#4aa9ff","stop-opacity":"0"})])],-1)),e("path",{d:H.value,fill:"url(#star-grad)",class:"star-area"},null,8,Tt),e("path",{d:H.value.replace(" L 0,30","").replace(" L 120,30 Z",""),fill:"none",class:"path-curve"},null,8,Ot),t[12]||(t[12]=e("circle",{cx:120,cy:12,r:"2.5",class:"glow-point"},null,-1))]))])])])]),e("footer",Pt,[e("div",Bt,[e("div",Gt,[(c(!0),i(et,null,at(f.value,o=>(c(),i("img",{key:o.id,src:o.avatar_url,title:o.login,class:"contributor-avatar"},null,8,Ft))),128)),S.value?(c(),i("div",{key:0,class:"contributor-extra",title:h.value?"+"+h.value+" more contributors":"more contributors","aria-label":h.value?"+"+h.value+" more contributors":"more contributors",role:"img"},m(h.value?"+"+h.value:"â€¦"),9,Zt)):C("",!0)])]),t[14]||(t[14]=e("div",{class:"system-tag"},[e("span",{class:"status-dot"}),e("span",{class:"tag-code"},"DATA_STREAM::ALIVE")],-1))])]))],2))}},Yt=ot(Vt,[["__scopeId","data-v-1545da05"]]);export{Yt as default};
