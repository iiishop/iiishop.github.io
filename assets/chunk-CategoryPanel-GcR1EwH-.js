const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-CategoryNode-Yhvlfdh5.js","assets/entry-index-iVSCK1fB.js","assets/chunk-mermaid-lib-CtMrMl2-.js","assets/asset-index-DQTw5x8l.css","assets/chunk-_plugin-vue_export-helper-DlAUqK2U.js","assets/asset-CategoryNode-D5RxkcSY.css"])))=>i.map(i=>d[i]);
import{_ as M}from"./chunk-mermaid-lib-CtMrMl2-.js";import{v as Z,i as f,k as y,f as O,n as L,A as S,b as i,o as c,e as a,q as P,t as d,a as m,w as v,F as w,m as C,c as E,u as F,d as R,l as k,T as b,G as $}from"./entry-index-iVSCK1fB.js";import{g as x}from"./chunk-index-D-nlVayj.js";import{_ as D}from"./chunk-_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"CategoryPanel"},I={class:"panel-header"},W={class:"header-left"},q={class:"header-content"},z={class:"category-title"},U={class:"subtitle"},J=["disabled"],K={class:"tree-container"},Q=["onClick"],X={class:"node-content"},Y={class:"file-name"},ee={class:"file-date"},te={key:0,class:"empty-state"},ae={__name:"CategoryPanel",props:{categoryPath:{type:Array,default:()=>[]}},setup(N){const T=R(()=>M(()=>import("./chunk-CategoryNode-Yhvlfdh5.js"),__vite__mapDeps([0,1,2,3,4,5]))),o=N,h=Z(),A=y.categories,V=s=>{const e={},t=n=>{const r={};for(const[l,p]of Object.entries(n))r[l]={name:l,files:p.files||[],childCategories:p.childCategories?t(p.childCategories):{}};return r};for(const[n,r]of Object.entries(s))e[n]={name:n,files:r.files||[],childCategories:r.childCategories?t(r.childCategories):{}};return e},u=f(()=>V(A)),_=f(()=>{if(o.categoryPath.length===0)return Object.entries(y.markdowns).filter(([e,t])=>!t.categories||t.categories.length===0).map(([e,t])=>({...t,path:e}));let s=u.value;for(let e=0;e<o.categoryPath.length;e++){const t=o.categoryPath[e];if(s[t]){if(e===o.categoryPath.length-1)return(s[t].files||[]).map(r=>({...y.markdowns[r],path:r}));s=s[t].childCategories}else return[]}return[]}),g=f(()=>{if(o.categoryPath.length===0)return u.value;let s=u.value;for(const e of o.categoryPath)if(s[e])s=s[e].childCategories;else return{};return s}),j=()=>{if(o.categoryPath.length>0){const s=o.categoryPath.slice(0,-1).join("/");h.push(`/category/${s}`)}},B=()=>h.currentRoute.value.path.startsWith("/category")?o.categoryPath.join("/"):`/${o.categoryPath.join("/")}`;function H(s){const e=s.split("/").filter(l=>l!==""),n=e.pop().replace(".md","");let r=null;if(e.length>0){const l=e[e.length-1];l.toLowerCase()!=="posts"&&(r=l)}h.push({name:"PostPage",params:{collection:r,mdName:n}})}return O(async()=>{x.from(".CategoryPanel",{duration:.8,opacity:0,y:30,ease:"power3.out"}),await L()}),S(()=>o.categoryPath,()=>{x.fromTo(".header-content",{y:-5,opacity:.5},{y:0,opacity:1,duration:.3,ease:"power2.out"})}),(s,e)=>(c(),i("div",G,[a("div",I,[a("div",W,[e[0]||(e[0]=a("div",{class:"icon-wrapper"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"header-icon"},[a("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})])],-1)),a("div",q,[a("h2",z,d(o.categoryPath.length>0?o.categoryPath[o.categoryPath.length-1]:"Categories"),1),a("span",U,d(o.categoryPath.length>0?"子目录浏览":"知识分类索引"),1)])]),o.categoryPath.length>0?(c(),i("button",{key:0,onClick:j,disabled:o.categoryPath.length===0,class:"back-button",title:"返回上一级"},e[1]||(e[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"back-icon"},[a("path",{"fill-rule":"evenodd",d:"M9.53 2.47a.75.75 0 0 1 0 1.06L4.81 8.25H15a6.75 6.75 0 0 1 0 13.5h-3a.75.75 0 0 1 0-1.5h3a5.25 5.25 0 1 0 0-10.5H4.81l4.72 4.72a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})],-1)]),8,J)):P("",!0)]),a("div",K,[m(b,{name:"list",tag:"ul",class:"category-ul",appear:""},{default:v(()=>[(c(!0),i(w,null,C(g.value,(t,n,r)=>(c(),E(F(T),{key:n,name:n,node:t,parentPath:B(),class:"category-list-enter",style:k({"--delay":r*.05+"s"})},null,8,["name","node","parentPath","style"]))),128))]),_:1}),m(b,{name:"list",tag:"ul",class:"file-ul",appear:""},{default:v(()=>[(c(!0),i(w,null,C(_.value,(t,n)=>(c(),i("li",{key:t.path,class:"file-item-wrapper file-list-enter",style:k({"--delay":Object.keys(g.value).length*.05+n*.05+"s"})},[a("div",{class:"file-node",onClick:r=>H(t.path)},[a("div",X,[e[2]||(e[2]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"file-icon"},[a("path",{"fill-rule":"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z","clip-rule":"evenodd"}),a("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})],-1)),a("span",Y,d(t.title||"Untitled"),1)]),a("span",ee,d(t.date),1)],8,Q)],4))),128))]),_:1}),m($,{name:"fade"},{default:v(()=>[Object.keys(g.value).length===0&&_.value.length===0?(c(),i("div",te,e[3]||(e[3]=[a("span",null,"此目录下暂无内容",-1)]))):P("",!0)]),_:1})])]))}},le=D(ae,[["__scopeId","data-v-6f499cfd"]]);export{le as default};
