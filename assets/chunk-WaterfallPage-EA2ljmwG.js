const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-SteamGameBlock-CG7zfMrP.js","assets/entry-index-CC0immY_.js","assets/chunk-mermaid-lib-PTTmCi0X.js","assets/asset-index-DQTw5x8l.css","assets/chunk-color-thief-DF3QbzqH.js","assets/chunk-_plugin-vue_export-helper-DlAUqK2U.js","assets/asset-SteamGameBlock-B-ltQF1U.css","assets/chunk-BangumiBlock-DS0oJxN_.js","assets/asset-BangumiBlock-CZgwujlY.css","assets/chunk-BilibiliVideoBlock-_ADmA9Nr.js","assets/asset-BilibiliVideoBlock-DE3SKqHY.css","assets/chunk-GithubRepoBlock-D-tqweO0.js","assets/asset-GithubRepoBlock-CkND9FTr.css","assets/chunk-XiaohongshuNoteBlock-BAmoTW4Y.js","assets/asset-XiaohongshuNoteBlock-C8nWHP7E.css"])))=>i.map(i=>d[i]);
import{an as ge,_ as R}from"./chunk-mermaid-lib-PTTmCi0X.js";import ke from"./chunk-BaseLayout-DScPbdWL.js";import xe from"./chunk-WaterfallPanel-BpXSd2e7.js";import{r as m,i as x,h as fe,A as re,f as ve,j as Me,c as he,o as w,b as M,q as T,e,a as ae,l as _e,t as b,x as ie,w as pe,G as Ie,D as Ce,I as Pe,J as We,n as te,d as Y,F as De}from"./entry-index-CC0immY_.js";import{m as ye}from"./chunk-MarkdownRenender-PQRWQmix.js";import{r as Le}from"./chunk-DynamicComponentRenderer-DqUUpADN.js";import Ee from"./chunk-GiscusComments-CyEJZ_TR.js";import{_ as we}from"./chunk-_plugin-vue_export-helper-DlAUqK2U.js";import{f as Be}from"./chunk-index-EUBHsC4_.js";import"./chunk-index-D-nlVayj.js";const Te={class:"modal-image-section"},Re=["src","alt"],Se={class:"image-info-float"},$e={class:"image-dimensions"},Fe={class:"image-format"},Oe={class:"image-zoom"},Ae={class:"image-toolbar"},He={class:"toolbar-group"},Ge={class:"zoom-text"},Ne={class:"toolbar-group"},Ve={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},je={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ze={key:0,class:"image-info-panel"},Ue={class:"info-item"},Xe={class:"info-value"},Ye={class:"info-item"},qe={class:"info-value"},Ke={class:"info-item"},Qe={class:"info-value"},Je={class:"info-item"},Ze={class:"info-value"},et={class:"info-item"},tt={class:"info-value"},at={class:"info-item"},ot={class:"info-value"},nt={key:0,class:"modal-description-section"},lt=["innerHTML"],st={key:0,class:"image-comments-section"},rt={__name:"ImageModal",props:{image:{type:Object,required:!0},description:{type:String,default:""},triggerCardRect:{type:Object,default:null},images:{type:Array,default:()=>[]},currentIndex:{type:Number,default:0}},emits:["close","next","prev"],setup(S,{emit:$}){const N=Y(()=>R(()=>import("./chunk-SteamGameBlock-CG7zfMrP.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),F=Y(()=>R(()=>import("./chunk-BangumiBlock-DS0oJxN_.js"),__vite__mapDeps([7,1,2,3,4,5,8]))),_=Y(()=>R(()=>import("./chunk-BilibiliVideoBlock-_ADmA9Nr.js"),__vite__mapDeps([9,1,2,3,5,10]))),q=Y(()=>R(()=>import("./chunk-GithubRepoBlock-D-tqweO0.js"),__vite__mapDeps([11,1,2,3,5,12]))),V=Y(()=>R(()=>import("./chunk-XiaohongshuNoteBlock-BAmoTW4Y.js"),__vite__mapDeps([13,1,2,3,5,14]))),c=S,j=$,z=m(null),K=m(null),W=m(!1),y=m(""),g=m(1),D=m(0),L=m(0),E=m(0),I=m(!1),Q=m(0),J=m(0),C=m(!1),O=m(!1),o=x(()=>{var s,t,d;return((s=fe.Giscus)==null?void 0:s.enabled)&&((d=(t=fe.Giscus)==null?void 0:t.imageModal)==null?void 0:d.enabled)}),l=x(()=>c.image.src||c.image.title||"image-"+c.currentIndex),n=x(()=>c.image.width&&c.image.height?`${c.image.width} × ${c.image.height}`:""),a=x(()=>c.image.src?c.image.src.split(".").pop().toUpperCase():""),r=x(()=>({transform:`scale(${g.value}) rotate(${D.value}deg) translate(${L.value}px, ${E.value}px)`,cursor:g.value>1?I.value?"grabbing":"grab":"default",transition:I.value?"none":"transform 0.3s ease"})),i=x(()=>c.images&&c.images.length>1&&c.currentIndex>0),u=x(()=>c.images&&c.images.length>1&&c.currentIndex<c.images.length-1),f=x(()=>{const s=y.value||c.description;if(!s)return"";const t=s.trim().toLowerCase();if(t.startsWith("<!doctype")||t.startsWith("<html")||t.includes("<!doctype html>"))return console.warn("[ImageModal] Blocked HTML content from rendering"),"";let d=s;if(d.startsWith("---")){const h=d.indexOf("---",3);h!==-1&&(d=d.substring(h+3).trim())}return ye.render(d)}),v=x(()=>{const s=y.value||c.description;if(!s)return!1;const t=s.trim().toLowerCase();return!(t.startsWith("<!doctype")||t.startsWith("<html")||t.includes("<!doctype html>"))});async function U(){if(!c.image.mdPath){y.value="";return}try{const s=await fetch(c.image.mdPath);if(!s.ok){console.log("[ImageModal] .md file not found (status:",s.status,")"),y.value="";return}if((s.headers.get("content-type")||"").includes("text/html")){console.log("[ImageModal] .md file not found (got HTML content-type)"),y.value="";return}const d=await s.text();if(!d||!d.trim()){console.log("[ImageModal] .md file is empty"),y.value="";return}const h=d.trim().toLowerCase();if(h.startsWith("<!doctype")||h.startsWith("<html")||h.includes("<!doctype html>")||h.includes("<html>")){console.log("[ImageModal] .md file not found (got HTML page)"),y.value="";return}y.value=d,console.log("[ImageModal] Successfully loaded .md file")}catch(s){console.log("[ImageModal] Failed to load markdown description:",s),y.value=""}}function B(){W.value=!1,p(),j("close")}function p(){g.value=1,D.value=0,L.value=0,E.value=0,I.value=!1}function P(){g.value=Math.min(g.value+.25,5)}function X(){g.value=Math.max(g.value-.25,.5)}function A(){g.value=1,L.value=0,E.value=0}function H(){D.value-=90}function oe(){D.value+=90}async function Z(){try{const t=await(await fetch(c.image.src)).blob(),d=window.URL.createObjectURL(t),h=document.createElement("a");h.href=d,h.download=c.image.title||"image",document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(d)}catch(s){console.error("[ImageModal] Failed to download image:",s),alert("下载失败，请稍后重试")}}async function ne(){try{const s=window.location.origin+c.image.src;await navigator.clipboard.writeText(s),alert("✓ 图片链接已复制到剪贴板")}catch(s){console.error("[ImageModal] Failed to copy link:",s),alert("复制失败，请手动复制")}}function G(){C.value=!C.value}function k(){O.value=!O.value}function le(s){g.value<=1||(I.value=!0,Q.value=s.clientX-L.value,J.value=s.clientY-E.value,s.preventDefault())}function se(s){I.value&&(L.value=s.clientX-Q.value,E.value=s.clientY-J.value)}function ee(){I.value=!1}function ce(){g.value===1?g.value=2:A()}function be(s){s.preventDefault();const t=s.deltaY>0?-.1:.1;g.value=Math.max(.5,Math.min(5,g.value+t))}function de(){i.value&&(p(),j("prev"))}function ue(){u.value&&(p(),j("next"))}function me(s){if(W.value)switch(s.key){case"Escape":B();break;case"ArrowLeft":de();break;case"ArrowRight":ue();break;case"+":case"=":P();break;case"-":case"_":X();break;case"0":A();break;case"f":case"F":G();break;case"i":case"I":k();break;case"d":case"D":Z();break}}return re(()=>c.image,s=>{s&&(W.value=!0,p(),U())},{immediate:!0}),re(W,s=>{s&&te(()=>{z.value&&z.value.focus()})}),re(f,async()=>{await te();const s=K.value;if(s&&(Le(s,{bilibilivideoblock:_,steamgameblock:N,bangumiblock:F,githubrepoblock:q,xiaohongshunoteblock:V}),await te(),typeof ge<"u"))try{await ge.run({nodes:s.querySelectorAll(".mermaid")}),await te(),s.querySelectorAll(".mermaid svg").forEach(d=>{d.removeAttribute("width"),d.removeAttribute("height"),d.style.width="100%",d.style.height="400px",d.style.maxWidth="100%",d.style.maxHeight="400px",d.style.display="block",d.style.margin="0 auto"})}catch(t){console.warn("[ImageModal] Mermaid rendering failed:",t)}}),ve(()=>{document.addEventListener("keydown",me),U()}),Me(()=>{document.removeEventListener("keydown",me)}),(s,t)=>(w(),he(We,{to:"body"},[W.value?(w(),M("div",{key:0,class:"image-modal",onClick:Pe(B,["self"]),onKeydown:Ce(B,["esc"]),tabindex:"0",ref_key:"modalRef",ref:z},[t[21]||(t[21]=e("div",{class:"modal-backdrop"},null,-1)),e("div",{class:ie(["modal-content",{"no-description":!v.value,"fullscreen-mode":C.value}])},[e("div",Te,[e("div",{class:"image-container",onWheel:be},[e("img",{src:S.image.src,alt:S.image.alt,class:"modal-image",style:_e(r.value),onMousedown:le,onMousemove:se,onMouseup:ee,onMouseleave:ee,onDblclick:ce},null,44,Re),e("div",Se,[e("span",$e,b(n.value),1),e("span",Fe,b(a.value),1),e("span",Oe,b(Math.round(g.value*100))+"%",1)])],32),e("div",Ae,[e("div",He,[e("button",{class:"toolbar-btn",onClick:X,title:"缩小 (-)"},t[0]||(t[0]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"M8 11h6"}),e("path",{d:"M21 21l-4.35-4.35"})],-1)])),e("button",{class:"toolbar-btn",onClick:A,title:"重置 (0)"},[e("span",Ge,b(Math.round(g.value*100))+"%",1)]),e("button",{class:"toolbar-btn",onClick:P,title:"放大 (+)"},t[1]||(t[1]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"M11 8v6M8 11h6"}),e("path",{d:"M21 21l-4.35-4.35"})],-1)]))]),e("div",{class:"toolbar-group"},[e("button",{class:"toolbar-btn",onClick:H,title:"逆时针旋转"},t[2]||(t[2]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e("path",{d:"M3 3v5h5"})],-1)])),e("button",{class:"toolbar-btn",onClick:oe,title:"顺时针旋转"},t[3]||(t[3]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e("path",{d:"M21 3v5h-5"})],-1)]))]),e("div",Ne,[e("button",{class:"toolbar-btn",onClick:Z,title:"下载图片 (D)"},t[4]||(t[4]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])),e("button",{class:"toolbar-btn",onClick:ne,title:"复制链接"},t[5]||(t[5]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1)])),e("button",{class:ie(["toolbar-btn",{active:O.value}]),onClick:k,title:"图片信息 (I)"},t[6]||(t[6]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)]),2),e("button",{class:ie(["toolbar-btn",{active:C.value}]),onClick:G,title:"图片全屏 (F)"},[C.value?(w(),M("svg",je,t[8]||(t[8]=[e("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"},null,-1)]))):(w(),M("svg",Ve,t[7]||(t[7]=[e("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"},null,-1)])))],2)])]),ae(Ie,{name:"info-panel-fade"},{default:pe(()=>[O.value?(w(),M("div",ze,[t[15]||(t[15]=e("h3",null,"图片信息",-1)),e("div",Ue,[t[9]||(t[9]=e("span",{class:"info-label"},"标题:",-1)),e("span",Xe,b(S.image.title||"无"),1)]),e("div",Ye,[t[10]||(t[10]=e("span",{class:"info-label"},"编辑日期:",-1)),e("span",qe,b(S.image.date||"无"),1)]),e("div",Ke,[t[11]||(t[11]=e("span",{class:"info-label"},"尺寸:",-1)),e("span",Qe,b(n.value||"未知"),1)]),e("div",Je,[t[12]||(t[12]=e("span",{class:"info-label"},"格式:",-1)),e("span",Ze,b(a.value),1)]),e("div",et,[t[13]||(t[13]=e("span",{class:"info-label"},"缩放:",-1)),e("span",tt,b(Math.round(g.value*100))+"%",1)]),e("div",at,[t[14]||(t[14]=e("span",{class:"info-label"},"旋转:",-1)),e("span",ot,b(D.value)+"°",1)])])):T("",!0)]),_:1}),i.value?(w(),M("button",{key:0,class:"nav-btn nav-prev",onClick:de,title:"上一张 (←)"},t[16]||(t[16]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"15 18 9 12 15 6"})],-1)]))):T("",!0),u.value?(w(),M("button",{key:1,class:"nav-btn nav-next",onClick:ue,title:"下一张 (→)"},t[17]||(t[17]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"9 18 15 12 9 6"})],-1)]))):T("",!0),e("button",{class:"close-btn",onClick:B,"aria-label":"Close modal"},t[18]||(t[18]=[e("svg",{viewBox:"0 0 24 24"},[e("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))]),v.value&&!C.value?(w(),M("div",nt,[t[20]||(t[20]=e("div",{class:"description-header"},[e("h2",{class:"description-title"},"图片描述")],-1)),e("div",{class:"description-content",ref_key:"contentRef",ref:K},[e("div",{innerHTML:f.value,class:"markdown-body"},null,8,lt)],512),o.value?(w(),M("div",st,[t[19]||(t[19]=e("div",{class:"comments-divider"},[e("span",{class:"divider-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])]),e("span",{class:"divider-text"},"评论与互动"),e("span",{class:"divider-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})])])],-1)),ae(Ee,{"component-type":"image",term:l.value,compact:!0,"emphasize-reactions":!0},null,8,["term"])])):T("",!0)])):T("",!0)],2)],544)):T("",!0)]))}},it=we(rt,[["__scopeId","data-v-628a9727"]]),ct={__name:"WaterfallPage",setup(S){const $=m(null),N=m([]),F=m(null),_=m(""),q=m(!1),V=m(null),c=[".png",".jpg",".jpeg",".gif",".webp",".svg",".avif"];async function j(){const o="/Posts/WaterfallGraph",l=[];try{return await z(o,l),console.log("[WaterfallPage] Scanned files:",l),l}catch(n){return console.error("[WaterfallPage] Error scanning directory:",n),[]}}async function z(o,l){try{const n=Object.assign({"/public/Posts/WaterfallGraph/7ba7c1c378c78569279747e1c684a186.jpg":()=>R(()=>import("./chunk-7ba7c1c378c78569279747e1c684a186-CHPeMA2G.js"),[]).then(a=>a.default),"/public/Posts/WaterfallGraph/QQ图片20241210012107.jpg":()=>R(()=>import("./chunk-QQ图片20241210012107-BHzg_r5M.js"),[]).then(a=>a.default)});console.log("[WaterfallPage] Image modules found:",Object.keys(n));for(const a in n){const r=a.replace("/public",""),i=r.split("/").pop(),u=r.substring(0,r.lastIndexOf("/"));l.push({path:r,name:i,directory:u,fullPath:a})}console.log("[WaterfallPage] Processed files:",l)}catch(n){console.error(`[WaterfallPage] Error scanning ${o}:`,n)}}function K(o){const l=o.filter(n=>{const a=n.name.lastIndexOf(".");if(a===-1)return console.log(`[WaterfallPage] File has no extension: ${n.name}`),!1;const r="."+n.name.substring(a+1).toLowerCase(),i=c.includes(r);return console.log(`[WaterfallPage] File: ${n.name}, Extension: ${r}, Supported: ${i}`),i});return console.log("[WaterfallPage] Filtered images:",l),l}async function W(o){console.log("[WaterfallPage] Loading metadata for",o.length,"files");const l=o.map(async r=>{try{const i=await y(r.path),u=r.name.lastIndexOf("."),f=u>0?r.name.substring(0,u):r.name,v=L(r.path),B=E(r.name)||new Date().toISOString(),p=await g(i),P={id:v,src:r.path,alt:f,title:f,width:i.naturalWidth,height:i.naturalHeight,aspectRatio:i.naturalWidth/i.naturalHeight,dominantColor:p,date:B,tags:[],mdPath:r.path.replace(/\.[^.]+$/,".md"),hasDescription:!1,directory:r.directory,fileName:r.name};return console.log("[WaterfallPage] Loaded metadata for:",r.name,P),P}catch(i){return console.error(`[WaterfallPage] Failed to load metadata for ${r.path}:`,i),null}}),a=(await Promise.all(l)).filter(r=>r!==null);return console.log("[WaterfallPage] Successfully loaded",a.length,"images"),a}function y(o){return new Promise((l,n)=>{const a=new Image,r=setTimeout(()=>{a.src="",n(new Error(`Timeout loading image: ${o}`))},1e4);a.onload=()=>{clearTimeout(r),console.log("[WaterfallPage] Image loaded successfully:",o),l(a)},a.onerror=i=>{clearTimeout(r),console.error("[WaterfallPage] Image load error:",o,i),n(new Error(`Failed to load image: ${o}`))},a.src=o})}async function g(o){try{const l=document.createElement("canvas"),n=l.getContext("2d",{willReadFrequently:!0}),a=100;l.width=a,l.height=a;const r=o.naturalWidth/2,i=o.naturalHeight/2,u=Math.max(0,r-a/2),f=Math.max(0,i-a/2),v=Math.min(a,o.naturalWidth),U=Math.min(a,o.naturalHeight);n.drawImage(o,u,f,v,U,0,0,a,a);const p=n.getImageData(0,0,a,a).data;let P=0,X=0,A=0,H=0;for(let k=0;k<p.length;k+=4){const le=p[k],se=p[k+1],ee=p[k+2];p[k+3]>128&&(P+=le,X+=se,A+=ee,H++)}const oe=Math.round(P/H),Z=Math.round(X/H),ne=Math.round(A/H),G=D(oe,Z,ne);return`hsl(${G.h}, ${G.s}%, ${G.l}%)`}catch(l){return console.error("[WaterfallPage] Failed to extract dominant color:",l),"hsl(250, 60%, 65%)"}}function D(o,l,n){o/=255,l/=255,n/=255;const a=Math.max(o,l,n),r=Math.min(o,l,n),i=a-r;let u=0,f=0,v=(a+r)/2;if(i!==0)switch(f=v>.5?i/(2-a-r):i/(a+r),a){case o:u=((l-n)/i+(l<n?6:0))/6;break;case l:u=((n-o)/i+2)/6;break;case n:u=((o-l)/i+4)/6;break}return u=Math.round(u*360),f=Math.round(f*100),v=Math.round(v*100),{h:u,s:f,l:v}}function L(o){let l=0;for(let n=0;n<o.length;n++){const a=o.charCodeAt(n);l=(l<<5)-l+a,l=l&l}return`img-${Math.abs(l)}`}function E(o){const l=[/(\d{4})-(\d{2})-(\d{2})/,/(\d{4})(\d{2})(\d{2})/,/(\d{4})_(\d{2})_(\d{2})/];for(const n of l){const a=o.match(n);if(a){const[,r,i,u]=a;try{const f=`${r}-${i}-${u}`,v=new Date(f);if(!isNaN(v.getTime()))return v.toISOString()}catch{console.warn("[WaterfallPage] Invalid date extracted from filename:",o)}}}return null}async function I(o){const l=o.map(async n=>{try{const a=await fetch(n.mdPath,{method:"HEAD"});n.hasDescription=a.ok}catch{n.hasDescription=!1}return n});return await Promise.all(l)}function Q(o){return o.sort((l,n)=>{const a=new Date(l.date);return new Date(n.date)-a})}async function J(){try{const o=await j(),l=K(o),n=await W(l),a=await I(n),r=Q(a);N.value=r,console.log(`[WaterfallPage] Loaded ${r.length} images`)}catch(o){console.error("[WaterfallPage] Failed to load gallery images:",o),N.value=[]}}async function C(o,l){if(console.log("[WaterfallPage] Image clicked:",o,l),V.value=l,F.value=o,q.value=!0,o.hasDescription&&o.mdPath)try{console.log("[WaterfallPage] Loading description from:",o.mdPath);const n=await fetch(o.mdPath);if(n.ok){const a=await n.text();let r=a;try{r=Be(a).body}catch{console.log("[WaterfallPage] No front-matter found, using raw content")}const i=ye.render(r);_.value=i,console.log("[WaterfallPage] Description loaded and rendered successfully")}else console.warn("[WaterfallPage] Failed to load description:",n.status),_.value=""}catch(n){console.error("[WaterfallPage] Error loading description:",n),_.value=""}else console.log("[WaterfallPage] No description file for this image"),_.value=""}function O(){console.log("[WaterfallPage] Closing modal"),F.value=null,q.value=!1,_.value="",V.value=null,$.value&&$.value.resetAllCardStates&&$.value.resetAllCardStates()}return ve(()=>{J()}),(o,l)=>(w(),M(De,null,[ae(ke,{"show-tip-list":!1,"show-info-list":!1},{main:pe(()=>[ae(xe,{ref_key:"waterfallPanelRef",ref:$,images:N.value,onImageClick:C},null,8,["images"])]),_:1}),F.value?(w(),he(it,{key:0,image:F.value,description:_.value,"trigger-card-rect":V.value,onClose:O},null,8,["image","description","trigger-card-rect"])):T("",!0)],64))}},bt=we(ct,[["__scopeId","data-v-5313561e"]]);export{bt as default};
