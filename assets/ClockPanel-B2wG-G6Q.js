import{r as s,y as _,i as B,f as $,j as q,b as i,o as r,e as a,n as h,m as w,t as b,B as H,C as L,F as j,l as O,v as F,z as G}from"./index-MCLTv8Kv.js";import{g as N}from"./index-D-nlVayj.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"mode-switch"},Y={class:"lcd-inner"},J={class:"digit-display"},K={class:"info-area"},Q={key:0,class:"clock-info"},X={class:"lcd-date"},ee=["value"],oe={key:1,class:"pomodoro-info"},ae={class:"lcd-status"},te={class:"controls-area"},le={key:0,class:"clock-controls"},ne={key:1,class:"pomodoro-controls"},se={key:0,class:"time-adjust"},ie={class:"action-buttons"},re={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},ce={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},ue={key:2,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},de={__name:"ClockPanel",setup(ve){const c=s("clock"),u=s({panelBgStart:"#2a2a2a",panelBgEnd:"#1a1a1a",panelBorder:"rgba(255, 255, 255, 0.05)",panelTopBar:"#2a2a2a",modeSwitchBg:"rgba(0, 0, 0, 0.3)",lcdBorder:"#0a1a0f",shadowColor:"rgba(0, 0, 0, 0.6)"}),T=s(new Date),C=s(null),k=[{value:"Asia/Shanghai",label:"北京 (UTC+8)",offset:"+8"},{value:"America/New_York",label:"纽约 (UTC-5)",offset:"-5"},{value:"Europe/London",label:"伦敦 (UTC+0)",offset:"+0"},{value:"Asia/Tokyo",label:"东京 (UTC+9)",offset:"+9"},{value:"Europe/Paris",label:"巴黎 (UTC+1)",offset:"+1"},{value:"Australia/Sydney",label:"悉尼 (UTC+11)",offset:"+11"},{value:"Asia/Dubai",label:"迪拜 (UTC+4)",offset:"+4"},{value:"America/Los_Angeles",label:"洛杉矶 (UTC-8)",offset:"-8"}],A=localStorage.getItem("clockPanelTimezone")||"Asia/Shanghai",p=s(A);_(p,e=>{localStorage.setItem("clockPanelTimezone",e)}),_(c,e=>{e==="pomodoro"?N.to(u.value,{duration:.6,ease:"power2.inOut",panelBgStart:"#ffffff",panelBgEnd:"#f5f5f5",panelBorder:"rgba(239, 68, 68, 0.3)",panelTopBar:"#ef4444",modeSwitchBg:"rgba(239, 68, 68, 0.1)",lcdBorder:"#f5f5f5",shadowColor:"rgba(239, 68, 68, 0.4)"}):N.to(u.value,{duration:.6,ease:"power2.inOut",panelBgStart:"#2a2a2a",panelBgEnd:"#1a1a1a",panelBorder:"rgba(255, 255, 255, 0.05)",panelTopBar:"#2a2a2a",modeSwitchBg:"rgba(0, 0, 0, 0.3)",lcdBorder:"#0a1a0f",shadowColor:"rgba(0, 0, 0, 0.6)"})});const v=s(25),m=s(0),n=s(!1),g=s(null),l=s(!1),M=(e,o)=>e.toLocaleTimeString("zh-CN",{timeZone:o,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),V=(e,o)=>{const t={timeZone:o,year:"numeric",month:"long",day:"numeric",weekday:"long"};return e.toLocaleDateString("zh-CN",t)},Z=B(()=>{if(c.value==="clock")return M(T.value,p.value);{const e=String(v.value).padStart(2,"0"),o=String(m.value).padStart(2,"0");return`${e}:${o}`}}),I=B(()=>V(T.value,p.value));B(()=>k.find(e=>e.value===p.value));const P=()=>{T.value=new Date},y=e=>{l.value&&e==="pomodoro"&&(l.value=!1,v.value=25,m.value=0),c.value=e},U=()=>{if(l.value){l.value=!1,v.value=25,m.value=0;return}n.value=!0,g.value=setInterval(()=>{m.value>0?m.value--:v.value>0?(v.value--,m.value=59):(clearInterval(g.value),n.value=!1,l.value=!0,D(),E())},1e3)},S=()=>{g.value&&(clearInterval(g.value),n.value=!1)},z=()=>{S(),v.value=25,m.value=0,l.value=!1},x=e=>{!n.value&&!l.value&&(v.value=Math.max(1,Math.min(60,v.value+e)),m.value=0)},D=()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),o=e.createOscillator(),t=e.createGain();o.connect(t),t.connect(e.destination),o.frequency.value=800,t.gain.setValueAtTime(.3,e.currentTime),o.start(e.currentTime),o.stop(e.currentTime+.1),setTimeout(()=>{const d=e.createOscillator(),f=e.createGain();d.connect(f),f.connect(e.destination),d.frequency.value=1e3,f.gain.setValueAtTime(.3,e.currentTime),d.start(e.currentTime),d.stop(e.currentTime+.1)},200),setTimeout(()=>{const d=e.createOscillator(),f=e.createGain();d.connect(f),f.connect(e.destination),d.frequency.value=1200,f.gain.setValueAtTime(.3,e.currentTime),d.start(e.currentTime),d.stop(e.currentTime+.15)},400)}catch(e){console.error("播放提示音失败:",e)}},E=()=>{if(!("Notification"in window)){console.log("此浏览器不支持系统通知");return}Notification.permission==="granted"?new Notification("⏰ 番茄钟提醒",{body:"专注时间已结束！该休息一下了~",icon:"/favicon.ico",badge:"/favicon.ico",tag:"pomodoro-timer",requireInteraction:!0,silent:!1}):Notification.permission!=="denied"&&Notification.requestPermission().then(e=>{e==="granted"&&new Notification("⏰ 番茄钟提醒",{body:"专注时间已结束！该休息一下了~",icon:"/favicon.ico",badge:"/favicon.ico",tag:"pomodoro-timer",requireInteraction:!0,silent:!1})})};return $(()=>{C.value=setInterval(P,1e3),"Notification"in window&&Notification.permission==="default"&&console.log("可以启用通知以接收番茄钟提醒")}),q(()=>{C.value&&clearInterval(C.value),g.value&&clearInterval(g.value)}),(e,o)=>(r(),i("div",{class:h(["ClockPanel",{flashing:l.value,"pomodoro-mode":c.value==="pomodoro"}]),style:G({"--panel-bg-start":u.value.panelBgStart,"--panel-bg-end":u.value.panelBgEnd,"--panel-border":u.value.panelBorder,"--panel-top-bar":u.value.panelTopBar,"--mode-switch-bg":u.value.modeSwitchBg,"--lcd-border":u.value.lcdBorder,"--shadow-color":u.value.shadowColor})},[a("div",W,[a("button",{class:h(["mode-btn",{active:c.value==="clock"}]),onClick:o[0]||(o[0]=t=>y("clock"))},o[6]||(o[6]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z","clip-rule":"evenodd"})],-1),w(" 时钟 ")]),2),a("button",{class:h(["mode-btn",{active:c.value==="pomodoro"}]),onClick:o[1]||(o[1]=t=>y("pomodoro"))},o[7]||(o[7]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z","clip-rule":"evenodd"})],-1),w(" 番茄钟 ")]),2)]),a("div",{class:h(["lcd-screen",{alert:l.value,"pomodoro-mode":c.value==="pomodoro"}])},[a("div",Y,[a("div",J,b(Z.value),1),a("div",K,[c.value==="clock"?(r(),i("div",Q,[a("div",X,b(I.value),1),H(a("select",{class:"timezone-select","onUpdate:modelValue":o[2]||(o[2]=t=>p.value=t)},[(r(),i(j,null,O(k,t=>a("option",{key:t.value,value:t.value},b(t.label),9,ee)),64))],512),[[L,p.value]])])):(r(),i("div",oe,[a("div",ae,b(l.value?"时间到！":n.value?"专注中":"就绪"),1)]))])])],2),a("div",te,[c.value==="clock"?(r(),i("div",le)):(r(),i("div",ne,[!n.value&&!l.value?(r(),i("div",se,[a("button",{class:"adjust-btn",onClick:o[3]||(o[3]=t=>x(-5))},o[8]||(o[8]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M4.25 12a.75.75 0 0 1 .75-.75h14a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})],-1),w(" 5分钟 ")])),a("button",{class:"adjust-btn",onClick:o[4]||(o[4]=t=>x(5))},o[9]||(o[9]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})],-1),w(" 5分钟 ")]))])):F("",!0),a("div",ie,[a("button",{class:h(["action-btn primary",{"stop-flash":l.value}]),onClick:o[5]||(o[5]=t=>n.value?S():U())},[!n.value&&!l.value?(r(),i("svg",re,o[10]||(o[10]=[a("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z","clip-rule":"evenodd"},null,-1)]))):n.value?(r(),i("svg",ce,o[11]||(o[11]=[a("path",{"fill-rule":"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z","clip-rule":"evenodd"},null,-1)]))):(r(),i("svg",ue,o[12]||(o[12]=[a("path",{"fill-rule":"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z","clip-rule":"evenodd"},null,-1)]))),w(" "+b(l.value?"停止提醒":n.value?"暂停":"开始"),1)],2),a("button",{class:"action-btn secondary",onClick:z},o[13]||(o[13]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z","clip-rule":"evenodd"})],-1),w(" 重置 ")]))])]))])],6))}},ge=R(de,[["__scopeId","data-v-73f0b58f"]]);export{ge as default};
