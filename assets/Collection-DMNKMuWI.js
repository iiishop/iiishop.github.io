import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as x,o as _,y as v,b as I,d as S,f as l,t as u,z as $}from"./index-E8b4J8RI.js";const p=["src"],D={class:"info"},U={__name:"Collection",props:{name:String,imageUrl:String,createDate:String,count:Number},setup(r){const m=r,d=x({}),w=t=>new Promise((a,c)=>{const g=document.createElement("canvas"),f=g.getContext("2d");t.crossOrigin="Anonymous",t.onload=()=>{g.width=t.width,g.height=t.height,f.drawImage(t,0,0,t.width,t.height);const s=f.getImageData(0,0,t.width,t.height).data,i=[];let h=0;for(let e=0;e<s.length;e+=4){const o=s[e],n=s[e+1],C=s[e+2];o>=204&&n>=204&&C>=204?h++:i.push([o,n,C])}const y=t.width*t.height;if(h<y/2){const e=i.reduce((o,n)=>[o[0]+n[0],o[1]+n[1],o[2]+n[2]],[0,0,0]).map(o=>Math.round(o/i.length));a(`rgba(${e[0]}, ${e[1]}, ${e[2]}, 0.4)`)}else{const e=i.concat(Array(h).fill([255,255,255])).reduce((o,n)=>[o[0]+n[0],o[1]+n[1],o[2]+n[2]],[0,0,0]).map(o=>Math.round(o/y));a(`rgba(${e[0]}, ${e[1]}, ${e[2]}, 0.4)`)}},t.onerror=c,t.src=m.imageUrl});return _(async()=>{const t=new Image;try{const a=await w(t);d.value={backgroundColor:a}}catch(a){console.error("Error loading image:",a)}}),v(()=>m.imageUrl,async t=>{const a=new Image;try{const c=await w(a);d.value={backgroundColor:c}}catch(c){console.error("Error loading image:",c)}}),(t,a)=>(S(),I("div",{class:"collection",style:$(d.value)},[l("img",{src:r.imageUrl},null,8,p),l("div",D,[l("h2",null,u(r.name),1),l("p",null,u(r.createDate),1),l("p",null,"内有"+u(r.count)+"篇文章",1)])],4))}},A=b(U,[["__scopeId","data-v-57106635"]]);export{A as default};
