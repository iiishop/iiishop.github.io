import{b as m,o as g,l as R,c as et,e as l,t as I,F,k as O,y as V,m as B,E as G,G as nt,H as st,C as at}from"./entry-index-YuPeCGrD.js";import{_ as rt}from"./chunk-_plugin-vue_export-helper-DlAUqK2U.js";import"./chunk-mermaid-lib-C3SUPDTN.js";const ot={name:"CalendarPanel",setup(){return{router:at()}},data(){return{isExpanded:!1,currentDate:new Date,currentWeekStart:null,selectedDate:null,events:[],weekdays:["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"]}},computed:{todayEvents(){const t=this.formatDate(new Date);return this.getUniqueEventsForDate(t)},currentMonthYear(){return`${this.currentDate.getFullYear()}å¹´${this.currentDate.getMonth()+1}æœˆ`},weekRangeText(){if(!this.currentWeekStart)return"";const t=new Date(this.currentWeekStart),e=new Date(t);return e.setDate(e.getDate()+6),`${t.getMonth()+1}/${t.getDate()} - ${e.getMonth()+1}/${e.getDate()}`},weekDays(){if(!this.currentWeekStart)return[];const t=[],e=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"];for(let i=0;i<7;i++){const s=new Date(this.currentWeekStart);s.setDate(s.getDate()+i);const o=this.formatDate(s),a=this.getUniqueEventsForDate(o);t.push({date:o,weekday:e[s.getDay()],dayMonth:`${s.getMonth()+1}/${s.getDate()}`,isToday:o===this.formatDate(new Date),events:this.getEventsForDate(o),eventCount:a.length})}return t},calendarDays(){const t=this.currentDate.getFullYear(),e=this.currentDate.getMonth(),i=new Date(t,e,1),s=new Date(t,e+1,0),o=i.getDay(),a=s.getDate(),n=[],r=this.formatDate(new Date),d=new Date(t,e,0).getDate();for(let c=o-1;c>=0;c--){const D=d-c,u=this.formatDate(new Date(t,e-1,D)),p=this.getUniqueEventsForDate(u);n.push({day:D,date:u,isCurrentMonth:!1,isToday:!1,events:p})}for(let c=1;c<=a;c++){const D=this.formatDate(new Date(t,e,c)),u=this.getUniqueEventsForDate(D);n.push({day:c,date:D,isCurrentMonth:!0,isToday:D===r,events:u})}const f=42-n.length;for(let c=1;c<=f;c++){const D=this.formatDate(new Date(t,e+1,c)),u=this.getUniqueEventsForDate(D);n.push({day:c,date:D,isCurrentMonth:!1,isToday:!1,events:u})}return n},selectedDayData(){if(!this.selectedDate)return null;const t=this.getEventsForDate(this.selectedDate),e=[],i=new Set;t.forEach(o=>{const a=o.id.replace(/-segment-\d+$/,"");if(!i.has(a)){i.add(a);const n=o.isSegmented?{...o,id:a}:o;e.push(n)}});const s=new Date(this.selectedDate);return{dateFormatted:`${s.getFullYear()}å¹´${s.getMonth()+1}æœˆ${s.getDate()}æ—¥`,events:e}}},methods:{formatDate(t){const e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${s}`},isEventOnDate(t,e){const i=new Date(t.startDate),s=new Date(t.endDate),o=new Date(e);return o>=new Date(i.toDateString())&&o<=new Date(s.toDateString())},getEventsForDate(t){const i=this.events.filter(s=>this.isEventOnDate(s,t)).map(s=>{const o=new Date(s.startDate),a=new Date(s.endDate),n=this.formatDate(o)===t,r=this.formatDate(a)===t;return{...s,timeRange:this.formatTimeRange(o,a),isFirstDay:n,isLastDay:r,isContinuing:!n&&!r}});return this.calculateEventLayout(i,t)},getUniqueEventsForDate(t){const e=this.getEventsForDate(t),i=[],s=new Set;return e.forEach(o=>{const a=o.id.replace(/-segment-\d+$/,"");s.has(a)||(s.add(a),i.push(o))}),i},calculateEventLayout(t,e){if(t.length===0)return t;const i=new Date(e),s=new Date(i.setHours(0,0,0,0)),o=new Date(i.setHours(23,59,59,999)),a=t.filter(h=>h.eventType==="timed"),n=t.filter(h=>h.eventType==="time-ranged-allday"),r=t.filter(h=>h.eventType==="duration-allday"),d=t.filter(h=>h.eventType==="regular-allday"),f=a.map(h=>({...h,isAllDay:!1})),c=[];n.forEach((h,T)=>{const L=new Date(h.startDate),S=new Date(h.endDate),_=(S-L)/(1e3*60),v=f.filter(M=>{const w=new Date(M.startDate),y=new Date(M.endDate);return w<S&&y>L});if(v.length===0)c.push({...h,columnIndex:T,totalColumns:n.length,isAllDay:!0});else{const M=[];let w=L,y=_;if(v.map(k=>({start:new Date(k.startDate),end:new Date(k.endDate)})).sort((k,$)=>k.start-$.start).forEach(k=>{if(w<k.start&&y>0){const $=new Date(Math.min(k.start,S)),N=($-w)/(1e3*60);M.push({startDate:w.toISOString(),endDate:$.toISOString()}),y-=N}w=new Date(Math.max(w,k.end))}),y>0&&w<o){const k=new Date(Math.min(w.getTime()+y*60*1e3,o));M.push({startDate:w.toISOString(),endDate:k.toISOString()})}M.forEach((k,$)=>{c.push({...h,id:`${h.id}-segment-${$}`,startDate:k.startDate,endDate:k.endDate,columnIndex:T,totalColumns:n.length,isAllDay:!0,isSegmented:!0,segmentIndex:$,totalSegments:M.length})})}});const D=this.autoScheduleEvents(r,e,[...f,...c]),u=[];d.forEach((h,T)=>{const S=[...f,...c,...D].filter(_=>{const v=new Date(_.startDate),M=new Date(_.endDate);return v<o&&M>s});if(S.length===0)u.push({...h,columnIndex:T,totalColumns:d.length,isAllDay:!0});else{const _=[];let v=s;S.map(w=>({start:new Date(w.startDate),end:new Date(w.endDate)})).sort((w,y)=>w.start-y.start).forEach(w=>{v<w.start&&_.push({startDate:v.toISOString(),endDate:w.start.toISOString()}),v=new Date(Math.max(v,w.end))}),v<o&&_.push({startDate:v.toISOString(),endDate:o.toISOString()}),_.forEach((w,y)=>{u.push({...h,id:`${h.id}-segment-${y}`,startDate:w.startDate,endDate:w.endDate,columnIndex:T,totalColumns:d.length,isAllDay:!0,isSegmented:!0,segmentIndex:y,totalSegments:_.length})})}});const p=[...f,...c,...D,...u];return this.applyDynamicWidth(p)},applyDynamicWidth(t){if(t.length===0)return[];const e=t.map(s=>({...s,start:new Date(s.startDate),end:new Date(s.endDate)})).sort((s,o)=>s.start-o.start||s.end-o.end),i=[];return e.forEach(s=>{const o=e.filter(a=>a!==s&&a.start<s.end&&a.end>s.start);if(o.length===0)i.push({...s,columnIndex:0,totalColumns:1});else{const a=new Set([s.start.getTime(),s.end.getTime()]);o.forEach(r=>{r.start>s.start&&r.start<s.end&&a.add(r.start.getTime()),r.end>s.start&&r.end<s.end&&a.add(r.end.getTime())});const n=Array.from(a).sort((r,d)=>r-d);for(let r=0;r<n.length-1;r++){const d=new Date(n[r]),f=new Date(n[r+1]),c=e.filter(p=>p.start<f&&p.end>d),D=c.findIndex(p=>p.id===s.id),u=c.length;i.push({...s,id:`${s.id}-dyn-${r}`,startDate:d.toISOString(),endDate:f.toISOString(),columnIndex:D,totalColumns:u,isDynamicSegment:n.length>2,dynamicSegmentIndex:r,totalDynamicSegments:n.length-1})}}}),i},autoScheduleEvents(t,e,i){if(t.length===0)return[];const s=new Date(e);let o=8,a=24;i.forEach(d=>{const f=new Date(d.startDate),c=new Date(d.endDate),D=f.getHours()+f.getMinutes()/60,u=c.getHours()+c.getMinutes()/60;D<o&&(o=Math.floor(D)),u>a&&(a=Math.ceil(u))});const n=[];for(let d=o;d<a;d++)for(let f=0;f<2;f++){const c=new Date(s);c.setHours(d,f*30,0,0);const D=new Date(c);D.setMinutes(D.getMinutes()+30);const u=i.some(p=>{const h=new Date(p.startDate),T=new Date(p.endDate);return h<D&&T>c});n.push({start:c,end:D,occupied:u})}const r=[];return t.forEach((d,f)=>{const c=d.durationHours||1,D=Math.ceil(c*2);let u=-1,p=0;for(let h=0;h<n.length;h++)if(n[h].occupied)p=0,u=-1;else if(p===0&&(u=h),p++,p>=D){for(let T=u;T<u+D;T++)n[T].occupied=!0;r.push({...d,startDate:n[u].start.toISOString(),endDate:n[u+D-1].end.toISOString(),columnIndex:f,totalColumns:t.length,isAllDay:!1,isAutoScheduled:!0});break}if(u===-1||p<D){const h=new Date(s);h.setHours(o,0,0,0);const T=new Date(h);T.setHours(T.getHours()+c),r.push({...d,startDate:h.toISOString(),endDate:T.toISOString(),columnIndex:f,totalColumns:t.length,isAllDay:!1,isAutoScheduled:!0,hasConflict:!0})}}),r},formatTimeRange(t,e){const i=a=>{const n=a.getHours(),r=a.getMinutes();return n===0&&r===0?"":`${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`},s=i(t),o=i(e);return this.formatDate(t)===this.formatDate(e)?s&&o?`${s} - ${o}`:"å…¨å¤©":`${this.formatDate(t)} - ${this.formatDate(e)}`},formatEventTime(t){const e=new Date(t.startDate),i=e.getHours(),s=e.getMinutes();return i===0&&s===0?"å…¨å¤©":`${String(i).padStart(2,"0")}:${String(s).padStart(2,"0")}`},getEventStyle(t){const e=new Date(t.startDate),s=(e.getHours()*60+e.getMinutes())/1440*100,o=new Date(t.endDate),a=(o-e)/(1e3*60),n=this.formatDate(e)===this.formatDate(o);let r;if(n)r=Math.max(a/1440*100,3);else{const p=new Date(e);p.setHours(23,59,59),r=(p-e)/(1e3*60)/1440*100}const d=t.totalColumns||1,f=t.columnIndex||0,c=100/d,D=c*f;let u=`3px solid ${t.color}`;return t.isAutoScheduled&&(u=`3px dashed ${t.color}`),t.hasConflict&&(u=`3px dotted ${t.color}`),{top:`${s}%`,height:`${r}%`,left:`${D}%`,width:`${c-1}%`,backgroundColor:t.color,borderLeft:u,opacity:t.hasConflict?.7:1}},getEventTooltip(t){let e=`${t.title}`;t.section&&(e+=` - ${t.section}`),e+=`
${t.timeRange}`,t.isSegmented&&(e+=`
(ç‰‡æ®µ ${t.segmentIndex+1}/${t.totalSegments})`),t.isAutoScheduled&&(e+=`
â° è‡ªåŠ¨è°ƒåº¦ (${t.durationHours}å°æ—¶)`),t.hasConflict&&(e+=`
âš ï¸ æ—¶é—´å†²çª`);const i={timed:"æ—¶é—´æ®µäº‹ä»¶","time-ranged-allday":"å›ºå®šæ—¶é—´å…¨å¤©äº‹ä»¶","duration-allday":"æ—¶é•¿å…¨å¤©äº‹ä»¶","regular-allday":"æ™®é€šå…¨å¤©äº‹ä»¶"};return t.eventType&&(e+=`
ç±»åž‹: ${i[t.eventType]||t.eventType}`),e},getWeekStart(t){const e=new Date(t),i=e.getDay(),s=e.getDate()-i;return new Date(e.setDate(s))},expand(){this.isExpanded=!0,this.selectedDate||(this.selectedDate=this.formatDate(new Date)),this.currentWeekStart||(this.currentWeekStart=this.getWeekStart(new Date))},collapse(){this.isExpanded=!1},selectDay(t){this.selectedDate=t.date;const e=new Date(t.date);this.currentWeekStart=this.getWeekStart(e)},previousMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1)},nextMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,1)},previousWeek(){const t=new Date(this.currentWeekStart);t.setDate(t.getDate()-7),this.currentWeekStart=t},nextWeek(){const t=new Date(this.currentWeekStart);t.setDate(t.getDate()+7),this.currentWeekStart=t},navigateToArticle(t){if(!t.articlePath){console.warn("äº‹ä»¶ç¼ºå°‘ articlePath:",t);return}console.log("å¯¼èˆªåˆ°æ–‡ç« :",t.articlePath);const e=t.articlePath.match(/\/Posts\/(.+)\/(.+)\.md$/);if(e){const[,i,s]=e;i==="Markdowns"?this.router.push({name:"PostPage",params:{mdName:s}}):this.router.push({name:"PostPage",params:{collection:i,mdName:s}})}else console.warn("æ— æ³•è§£æžæ–‡ç« è·¯å¾„:",t.articlePath)},parseMermaidGantt(t,e,i){const s=[],o=t.match(/```mermaid\s*gantt[\s\S]*?```/g);if(!o)return s;let a=new Date().getFullYear(),n=new Date().getMonth()+1,r=new Date().getDate();if(i){const d=new Date(i);isNaN(d.getTime())||(a=d.getFullYear(),n=d.getMonth()+1,r=d.getDate())}return o.forEach((d,f)=>{const c=d.split(`
`).slice(1,-1);let D="YYYY-MM-DD",u="",p=null,h=null,T=0;const L=(S,_=!1,v=null)=>{if(!S)return null;if(S.match(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2})?/))return S;if(S.match(/^\d{1,2}:\d{2}$/)){const M=v?new Date(v):new Date(a,n-1,r);return`${M.getFullYear()}-${String(M.getMonth()+1).padStart(2,"0")}-${String(M.getDate()).padStart(2,"0")}T${S.padStart(5,"0")}`}if(S.match(/^\d{1,2}-\d{1,2}$/)){const[M,w]=S.split("-").map(H=>parseInt(H));let y=a;if(_&&v){const H=new Date(v),k=H.getMonth()+1;M<k?y=H.getFullYear()+1:y=H.getFullYear()}return`${y}-${String(M).padStart(2,"0")}-${String(w).padStart(2,"0")}`}if(S.match(/^\d{1,2}-\d{1,2}\s+\d{1,2}:\d{2}$/)){const[M,w]=S.split(/\s+/),[y,H]=M.split("-").map($=>parseInt($));let k=a;if(_&&v){const $=new Date(v),N=$.getMonth()+1;y<N?k=$.getFullYear()+1:k=$.getFullYear()}return`${k}-${String(y).padStart(2,"0")}-${String(H).padStart(2,"0")}T${w.padStart(5,"0")}`}return S};c.forEach(S=>{if(S=S.trim(),S.startsWith("dateFormat"))D=S.split(/\s+/)[1];else if(S.startsWith("section")){u=S.substring(7).trim();const _=u.match(/\((\d{1,2}:\d{2})-(\d{1,2}:\d{2})\)/i);if(_)p={startTime:_[1].padStart(5,"0"),endTime:_[2].padStart(5,"0")},h=null;else{const v=u.match(/\((\d+(?:\.\d+)?)\s*h\)/i);v?(h=parseFloat(v[1]),p=null):(p=null,h=null)}}else if(S&&!S.startsWith("title")&&!S.startsWith("gantt")){const _=S.match(/^(.+?)\s*:(.*)$/);if(_){const[,v,M]=_,w=M.split(",").map(E=>E.trim());let y="",H="",k=null,$=null,N=null;if(w.forEach(E=>{["done","active","crit","milestone"].includes(E)?y=E:!H&&!E.match(/^\d{4}-\d{2}-\d{2}/)?H=E:E.match(/^\d{4}-\d{2}-\d{2}/)||E.match(/^\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}/)?k?$||($=E):k=E:E.match(/^\d+d$/)&&(N=parseInt(E))}),k)try{let E="#4ade80";y==="done"?E="#10b981":y==="active"?E="#3b82f6":y==="crit"?E="#ef4444":y==="milestone"&&(E="#f59e0b");const P=L(k,!1),Y=$?L($,!0,P):null;if(p&&Y){const W=new Date(P+"T00:00:00"),b=new Date(Y+"T23:59:59");if(Math.ceil((b-W)/(1e3*60*60*24))>1){const A=new Date(W);for(;A<=b;){const q=A.toISOString().split("T")[0],j=new Date(`${q}T${p.startTime}:00`),tt=new Date(`${q}T${p.endTime}:00`);s.push({id:`${e}-${f}-${T++}`,title:v.trim(),section:u,startDate:j.toISOString(),endDate:tt.toISOString(),status:y,color:E,articlePath:e,duration:1,eventType:"time-ranged-allday",priority:2}),A.setDate(A.getDate()+1)}return}}if(h&&Y){const W=new Date(P+"T00:00:00"),b=new Date(Y+"T23:59:59");if(Math.ceil((b-W)/(1e3*60*60*24))>1){const A=new Date(W);for(;A<=b;){const q=A.toISOString().split("T")[0];s.push({id:`${e}-${f}-${T++}`,title:v.trim(),section:u,startDate:new Date(`${q}T00:00:00`).toISOString(),endDate:new Date(`${q}T23:59:59`).toISOString(),status:y,color:E,articlePath:e,duration:1,eventType:"duration-allday",durationHours:h,priority:3,needsScheduling:!0}),A.setDate(A.getDate()+1)}return}}let x,C;if(D.includes("HH:mm")||P.includes("T")?x=new Date(P):x=new Date(P+"T00:00:00"),Y?D.includes("HH:mm")||Y.includes("T")?C=new Date(Y):C=new Date(Y+"T23:59:59"):N?(C=new Date(x),C.setDate(C.getDate()+N)):(C=new Date(x),!D.includes("HH:mm")&&!P.includes("T")?C.setHours(23,59,59):(C=new Date(x),C.setHours(C.getHours()+1))),isNaN(x.getTime())||isNaN(C.getTime())){console.warn(`æ— æ•ˆçš„æ—¥æœŸ: ${k} - ${$}`);return}const Z=Math.ceil((C-x)/(1e3*60*60*24)),z=x.getHours(),J=C.getHours(),K=x.getMinutes(),Q=C.getMinutes(),U=z===0&&K===0&&J===23&&Q===59||(C-x)/(1e3*60*60)>20;if(U&&!p&&!h)if(Z>1){const W=new Date(x);for(;W<=C;){const b=W.toISOString().split("T")[0];s.push({id:`${e}-${f}-${T++}`,title:v.trim(),section:u,startDate:new Date(`${b}T00:00:00`).toISOString(),endDate:new Date(`${b}T23:59:59`).toISOString(),status:y,color:E,articlePath:e,duration:1,eventType:"duration-allday",durationHours:5,priority:3,needsScheduling:!0}),W.setDate(W.getDate()+1)}return}else{s.push({id:`${e}-${f}-${T++}`,title:v.trim(),section:u,startDate:x.toISOString(),endDate:C.toISOString(),status:y,color:E,articlePath:e,duration:1,eventType:"duration-allday",durationHours:5,priority:3,needsScheduling:!0});return}s.push({id:`${e}-${f}-${T++}`,title:v.trim(),section:u,startDate:x.toISOString(),endDate:C.toISOString(),status:y,color:E,articlePath:e,duration:Math.max(1,Z),eventType:U?"regular-allday":"timed",priority:U?4:1})}catch(E){console.warn(`è§£æžæ—¥æœŸå¤±è´¥: ${k}`,E)}}}})}),s},async loadEvents(){try{const e=await(await fetch("/assets/PostDirectory.json")).json(),i=[],s=[],o=a=>{Array.isArray(a)?a.forEach(n=>{n.path&&s.push(n.path)}):typeof a=="object"&&Object.values(a).forEach(n=>o(n))};o(e),console.log(`æ‰¾åˆ° ${s.length} ç¯‡æ–‡ç« `);for(const a of s)try{const n=await fetch(a);if(!n.ok)continue;const r=await n.text(),d=r.match(/^---\s*\n[\s\S]*?date:\s*(.+?)\n[\s\S]*?---/),f=d?d[1].trim():null,c=this.parseMermaidGantt(r,a,f);c.length>0&&(console.log(`ä»Ž ${a} è§£æžåˆ° ${c.length} ä¸ªäº‹ä»¶`),i.push(...c))}catch(n){console.warn(`æ— æ³•åŠ è½½æ–‡ç«  ${a}:`,n)}this.events=i,console.log(`âœ… æˆåŠŸåŠ è½½ ${i.length} ä¸ªæ—¥åŽ†äº‹ä»¶`)}catch(t){console.error("âŒ åŠ è½½æ—¥åŽ†äº‹ä»¶å¤±è´¥:",t),this.events=[]}}},mounted(){this.loadEvents(),this.currentWeekStart=this.getWeekStart(new Date),this.$nextTick(()=>{if(this.events.length>0){const t=new Date(this.events[0].startDate);this.currentDate=new Date(t.getFullYear(),t.getMonth(),1),console.log(`ðŸ“… æ—¥åŽ†æ˜¾ç¤ºæœˆä»½: ${this.currentDate.getFullYear()}å¹´${this.currentDate.getMonth()+1}æœˆ`)}})}},it={class:"CalendarPanel"},lt={class:"month-header"},ct={class:"month-title"},dt={class:"mini-calendar"},ut={class:"weekday-row"},ht={class:"days-grid"},Dt={class:"day-num"},gt={key:0,class:"event-bars"},mt=["title"],ft={class:"today-summary"},yt={class:"summary-value"},pt={class:"expanded-header"},St={class:"expanded-content"},wt={class:"week-timeline"},vt={class:"timeline-header"},kt={class:"week-range"},Et={class:"timeline-grid"},Tt={class:"time-column"},Mt={class:"day-header"},_t={class:"day-name"},$t={class:"day-date"},Ct={key:0,class:"day-count"},It={class:"day-timeline"},xt=["onClick","title"],Ht={class:"event-time"},Ft={key:0},Ot={key:1},Wt={key:2},At={class:"event-title"},Yt={key:0,class:"event-duration"},bt={class:"month-calendar"},Rt={class:"calendar-nav"},Lt={class:"calendar-month"},Nt={class:"calendar-grid"},Pt=["onClick"],qt={class:"day-number"},Vt={key:0,class:"event-indicators"},Bt={key:0,class:"selected-day-events"},Ut={class:"events-list"},Zt=["onClick"],Gt={class:"event-info"},zt={class:"event-name"},Jt={class:"event-time-range"};function Kt(t,e,i,s,o,a){return g(),m("div",it,[o.isExpanded?R("",!0):(g(),m("div",{key:0,class:"compact-mode",onClick:e[0]||(e[0]=(...n)=>a.expand&&a.expand(...n))},[l("div",lt,[e[8]||(e[8]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"icon"},[l("path",{"fill-rule":"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z","clip-rule":"evenodd"})],-1)),l("span",ct,I(a.currentMonthYear),1)]),l("div",dt,[l("div",ut,[(g(!0),m(F,null,O(o.weekdays,n=>(g(),m("div",{key:n,class:"weekday"},I(n),1))),128))]),l("div",ht,[(g(!0),m(F,null,O(a.calendarDays,n=>(g(),m("div",{key:n.date,class:V(["mini-day",{"other-month":!n.isCurrentMonth,today:n.isToday,"has-events":n.events.length>0}])},[l("span",Dt,I(n.day),1),n.events.length>0?(g(),m("div",gt,[(g(!0),m(F,null,O(n.events,(r,d)=>(g(),m("div",{key:d,class:"event-bar",style:B({backgroundColor:r.color,width:`${100/n.events.length}%`}),title:r.title},null,12,mt))),128))])):R("",!0)],2))),128))])]),l("div",ft,[e[9]||(e[9]=l("div",{class:"summary-label"},"ä»Šæ—¥äº‹ä»¶",-1)),l("div",yt,I(a.todayEvents.length),1)])])),(g(),et(st,{to:"body"},[o.isExpanded?(g(),m("div",{key:0,class:"calendar-expanded-wrapper",onClick:e[7]||(e[7]=G((...n)=>a.collapse&&a.collapse(...n),["self"]))},[l("div",{class:"calendar-expanded-panel",onClick:e[6]||(e[6]=G(()=>{},["stop"]))},[l("div",pt,[e[11]||(e[11]=l("h2",null,[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z","clip-rule":"evenodd"})]),nt(" æ—¥åŽ†ä¸Žæ—¥ç¨‹ ")],-1)),l("button",{class:"close-btn",onClick:e[1]||(e[1]=(...n)=>a.collapse&&a.collapse(...n))},e[10]||(e[10]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})],-1)]))]),l("div",St,[l("div",wt,[l("div",vt,[l("button",{class:"nav-btn",onClick:e[2]||(e[2]=(...n)=>a.previousWeek&&a.previousWeek(...n))},"â€¹"),l("span",kt,I(a.weekRangeText),1),l("button",{class:"nav-btn",onClick:e[3]||(e[3]=(...n)=>a.nextWeek&&a.nextWeek(...n))},"â€º")]),l("div",Et,[l("div",Tt,[e[12]||(e[12]=l("div",{class:"time-header"},null,-1)),(g(),m(F,null,O(24,n=>l("div",{key:n,class:"time-label"},I(String(n-1).padStart(2,"0"))+":00 ",1)),64))]),(g(!0),m(F,null,O(a.weekDays,n=>(g(),m("div",{key:n.date,class:V(["day-column",{"is-today":n.isToday}])},[l("div",Mt,[l("div",_t,I(n.weekday),1),l("div",$t,I(n.dayMonth),1),n.eventCount>0?(g(),m("div",Ct,I(n.eventCount),1)):R("",!0)]),l("div",It,[(g(),m(F,null,O(24,r=>l("div",{key:r,class:"hour-slot"})),64)),(g(!0),m(F,null,O(n.events,r=>(g(),m("div",{key:r.id,class:V(["timeline-event",{"event-continuing":r.isContinuing,"event-first-day":r.isFirstDay,"event-last-day":r.isLastDay,"event-segmented":r.isSegmented,"event-auto-scheduled":r.isAutoScheduled,"event-conflict":r.hasConflict}]),style:B(a.getEventStyle(r)),onClick:d=>a.navigateToArticle(r),title:a.getEventTooltip(r)},[l("div",Ht,[r.isFirstDay&&!r.isSegmented?(g(),m("span",Ft,I(a.formatEventTime(r)),1)):r.isContinuing?(g(),m("span",Ot,"ç»§ç»­")):r.isLastDay?(g(),m("span",Wt,"ç»“æŸ")):R("",!0)]),l("div",At,I(r.title),1),r.duration>1&&!r.isSegmented?(g(),m("div",Yt,I(r.duration)+"å¤© ",1)):R("",!0)],14,xt))),128))])],2))),128))])]),l("div",bt,[l("div",Rt,[l("button",{onClick:e[4]||(e[4]=(...n)=>a.previousMonth&&a.previousMonth(...n))},"â€¹"),l("span",Lt,I(a.currentMonthYear),1),l("button",{onClick:e[5]||(e[5]=(...n)=>a.nextMonth&&a.nextMonth(...n))},"â€º")]),l("div",Nt,[(g(!0),m(F,null,O(o.weekdays,n=>(g(),m("div",{key:n,class:"calendar-weekday"},I(n),1))),128)),(g(!0),m(F,null,O(a.calendarDays,n=>(g(),m("div",{key:n.date,class:V(["calendar-day",{"other-month":!n.isCurrentMonth,today:n.isToday,"has-events":n.events.length>0,selected:n.date===o.selectedDate}]),onClick:r=>a.selectDay(n)},[l("span",qt,I(n.day),1),n.events.length>0?(g(),m("div",Vt,[(g(!0),m(F,null,O(n.events.slice(0,3),(r,d)=>(g(),m("span",{key:d,class:"event-dot",style:B({backgroundColor:r.color})},null,4))),128))])):R("",!0)],10,Pt))),128))]),a.selectedDayData?(g(),m("div",Bt,[l("h3",null,I(a.selectedDayData.dateFormatted),1),l("div",Ut,[(g(!0),m(F,null,O(a.selectedDayData.events,n=>(g(),m("div",{key:n.id,class:"event-item",onClick:r=>a.navigateToArticle(n)},[l("span",{class:"event-color",style:B({backgroundColor:n.color})},null,4),l("div",Gt,[l("div",zt,I(n.title),1),l("div",Jt,I(n.timeRange),1)])],8,Zt))),128))])])):R("",!0)])])])])):R("",!0)]))])}const te=rt(ot,[["render",Kt],["__scopeId","data-v-e414f239"]]);export{te as default};
