import{r as f,i as K,f as tt,b as i,o as c,e,q as I,t as m,y as et,H as at,F as st,m as ot,x as rt,g as $}from"./entry-index-BS55Hbpw.js";import{_ as lt}from"./chunk-_plugin-vue_export-helper-DlAUqK2U.js";const nt={key:0,class:"terminal-loader"},it={key:1,class:"error-slate"},ct=["href"],ut={key:2,class:"repo-card"},dt=["title"],vt={class:"cache-time"},ft=["title"],pt={key:0,class:"rate-time"},ht={class:"flex-layout"},mt={class:"main-info"},gt={class:"repo-header"},_t={class:"owner-chip"},bt={class:"repo-name"},yt=["href"],xt={class:"repo-bio"},kt={class:"repo-meta-strip"},wt={class:"meta-item star"},St={class:"meta-item fork"},Lt={key:0,class:"meta-item language"},Et={class:"visual-panel"},Mt={class:"activity-section"},Rt={class:"heartbeat-container"},At={viewBox:"0 0 100 20",preserveAspectRatio:"none",class:"heartbeat-svg"},It=["d"],Ct=["d"],Dt=["d"],Nt=["d"],$t={class:"growth-section"},Tt={class:"sparkline"},Ot={viewBox:"0 0 120 30",class:"spark-svg"},Pt=["d"],Bt=["d"],Ft={class:"repo-footer"},Gt={class:"contributors"},Zt={class:"contributor-stack"},Ht=["src","title"],Vt=["title","aria-label"],Ut={__name:"GithubRepoBlock",props:{repourl:String},setup(W){const T=W,r=f(null),b=f([]),p=f([]),w=f(!1),h=f(0),S=f(!0),L=f(!1),x=f(!1),C=f(null),E=(a=>{try{const t=new URL(a).pathname.split("/").filter(Boolean);if(t.length>=2)return{owner:t[0],repo:t[1]}}catch{return null}return null})(T.repourl);E&&(r.value={name:E.repo,owner:{login:E.owner},description:"Syncing repository metadata...",stargazers_count:0,forks_count:0,html_url:T.repourl,created_at:new Date().toISOString()});const Z=(a,t)=>`gh_cache_${a}_${t}`,q=(a,t,o)=>{localStorage.setItem(Z(a,t),JSON.stringify({timestamp:new Date().getTime(),data:o}))},O=(a,t)=>{const o=localStorage.getItem(Z(a,t));if(!o)return null;try{return JSON.parse(o)}catch{return null}},H=(a,t)=>`gh_etag_${a}_${t}`,Q=(a,t)=>localStorage.getItem(H(a,t)),V=(a,t,o)=>{if(o)try{localStorage.setItem(H(a,t),o)}catch{}},P=f(!1),k=f(null),U=a=>!a&&a!==0?"0":a>=1e3?(a/1e3).toFixed(1)+"k":a,z=K(()=>{if(!r.value)return"";const a=[],t=120,o=30,n=r.value.id||0;new Date(r.value.created_at);const g=u=>Math.abs(Math.sin(n+u)*1e3)%1;for(let u=0;u<=20;u++){const d=u/20*t,y=u/20,_=.3+g(1)*.4,M=8+g(2)*10;let R=1/(1+Math.exp(-M*(y-_)));R=R*.85+y*.15;const B=(g(u)-.5)*2,F=o-(R*(o-10)+5)+B;a.push(`${d},${F}`)}return`M 0,${o} L ${a.join(" L ")} L ${t},${o} Z`}),D=K(()=>{if(!b.value.length)return"M 0,15 L 100,15";const a=Math.max(...b.value,1);return`M ${b.value.map((o,n)=>{const g=n/(b.value.length-1)*100,u=18-o/a*16;return`${g.toFixed(2)},${u.toFixed(2)}`}).join(" L ")}`}),X=async()=>{var u;if(!E){L.value=!0,S.value=!1;return}const{owner:a,repo:t}=E,o=`https://api.github.com/repos/${a}/${t}`,n=O(a,t);n&&(r.value=n.data.repoData,b.value=n.data.commitStats,p.value=n.data.contributors,w.value=n.data.contributorsHasMore,h.value=n.data.contributorsExtraCount,x.value=!0,C.value=new Date(n.timestamp).toLocaleString(),S.value=!1);const g=async(d,y=3)=>{try{const _=await $.get(d,{headers:{}});return _.status===202&&y>0?(await new Promise(M=>setTimeout(M,2e3)),g(d,y-1)):_.data}catch(_){throw _}};try{const d=Q(a,t),y=d?{"If-None-Match":d}:{},_=$.get(o,{headers:y}),M=d?{"If-None-Match":d}:{},R=$.get(`${o}/contributors`,{params:{per_page:6},headers:M}),B=g(`${o}/stats/commit_activity`),F=await Promise.allSettled([_,B,R]),[A,G,Y]=F;if(A.status==="fulfilled"){const s=A.value;if(s.status===200&&s.data)r.value=s.data,V(a,t,s.headers&&(s.headers.etag||s.headers.Etag));else if(s.status===304){const l=O(a,t);l&&(r.value=l.data.repoData,x.value=!0,C.value=new Date(l.timestamp).toLocaleString())}if(s.headers){const l=s.headers["x-ratelimit-remaining"],N=s.headers["x-ratelimit-reset"];l!==void 0&&Number(l)<=0&&(P.value=!0,k.value=N?new Date(Number(N)*1e3).toLocaleString():null)}}else{const s=A.reason;if(((u=s==null?void 0:s.response)==null?void 0:u.status)===403){P.value=!0;const v=(s.response.headers||{})["x-ratelimit-reset"];k.value=v?new Date(Number(v)*1e3).toLocaleString():null,x.value||(r.value.description="API Rate Limit Exceeded. Using static data.")}else x.value||(L.value=!0)}if(G.status==="fulfilled"){const s=Array.isArray(G.value)?G.value.slice(-12):[];b.value=s.flatMap(l=>l.days)}if(Y.status==="fulfilled"){const s=Y.value;if(s.status===200){const v=Array.isArray(s.data)?s.data:[];p.value=v.slice(0,6),V(a,t,s.headers&&(s.headers.etag||s.headers.Etag))}else if(s.status===304){const v=O(a,t);v&&(p.value=v.data.contributors||[])}let l=null;if(s.headers&&s.headers.link)try{const v=await $.get(`${o}/contributors`,{params:{per_page:1},headers:{}}),j=v.headers&&v.headers.link;if(j){const J=j.match(/[?&]page=(\d+)[^>]*>;\s*rel="last"/);J&&(l=parseInt(J[1],10))}}catch{}l!==null?(w.value=l>p.value.length,h.value=Math.max(0,l-p.value.length)):w.value=(p.value&&p.value.length)>=6}A.status==="fulfilled"&&A.value.status===200&&(x.value=!1,q(a,t,{repoData:r.value,commitStats:b.value,contributors:p.value,contributorsHasMore:w.value,contributorsExtraCount:h.value}))}catch(d){console.error("GitHub API Error:",d),r.value||(L.value=!0)}finally{S.value=!1}};return tt(()=>X()),(a,t)=>(c(),i("div",{class:rt(["repo-embed-container",{"is-loading":S.value,"is-error":L.value}])},[S.value?(c(),i("div",nt,t[0]||(t[0]=[e("div",{class:"cursor"},null,-1),e("span",null,"ANALYZING_CORE_REPOSITORY...",-1)]))):L.value?(c(),i("div",it,[t[1]||(t[1]=e("div",{class:"error-icon"},"!",-1)),t[2]||(t[2]=e("div",{class:"error-text"},"REPOSITORY_ACCESS_DENIED",-1)),e("a",{href:T.repourl,target:"_blank",class:"emergency-link"},"MANUAL_ACCESS",8,ct)])):(c(),i("div",ut,[t[15]||(t[15]=e("div",{class:"card-accent-line"},null,-1)),x.value?(c(),i("div",{key:0,class:"cache-indicator",title:"Last updated: "+C.value},[t[3]||(t[3]=e("span",{class:"cache-label"},"OFFLINE_CACHE",-1)),e("span",vt,m(C.value),1)],8,dt)):I("",!0),P.value?(c(),i("div",{key:1,class:"rate-indicator",title:k.value?"Rate limit resets: "+k.value:"Rate limited"},[t[4]||(t[4]=e("span",{class:"rate-label"},"RATE_LIMITED",-1)),k.value?(c(),i("span",pt,m(k.value),1)):I("",!0)],8,ft)):I("",!0),e("div",ht,[e("div",mt,[e("header",gt,[e("div",_t,[t[5]||(t[5]=e("span",{class:"prefix"},"@",-1)),et(m(r.value.owner.login),1)]),e("h3",bt,[e("a",{href:r.value.html_url,target:"_blank"},m(r.value.name),9,yt)])]),e("p",xt,m(r.value.description||"No description provided for this stream."),1),e("div",kt,[e("div",wt,[t[6]||(t[6]=e("svg",{class:"icon",viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor"},[e("path",{d:"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Z"})],-1)),e("span",null,m(U(r.value.stargazers_count)),1)]),e("div",St,[t[7]||(t[7]=e("svg",{class:"icon",viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor"},[e("path",{d:"M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 10a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"})],-1)),e("span",null,m(U(r.value.forks_count)),1)]),r.value.language?(c(),i("div",Lt,[t[8]||(t[8]=e("span",{class:"lang-dot"},null,-1)),e("span",null,m(r.value.language),1)])):I("",!0)])]),e("div",Et,[e("div",Mt,[t[10]||(t[10]=e("div",{class:"section-label"},"COMMIT_PULSE (84D)",-1)),e("div",Rt,[(c(),i("svg",At,[t[9]||(t[9]=at('<defs data-v-7b824faf><linearGradient id="line-grad" x1="0%" y1="0%" x2="100%" y2="0%" data-v-7b824faf><stop offset="0%" stop-color="#44d07a" data-v-7b824faf></stop><stop offset="100%" stop-color="#4aa9ff" data-v-7b824faf></stop></linearGradient><linearGradient id="area-grad" x1="0%" y1="0%" x2="0%" y2="100%" data-v-7b824faf><stop offset="0%" stop-color="#44d07a" stop-opacity="0.45" data-v-7b824faf></stop><stop offset="100%" stop-color="#44d07a" stop-opacity="0" data-v-7b824faf></stop></linearGradient><mask id="scan-mask" data-v-7b824faf><rect width="30%" height="100%" x="-30%" fill="white" class="mask-rect" data-v-7b824faf></rect></mask></defs>',1)),e("path",{d:D.value+" L 100,20 L 0,20 Z",fill:"url(#area-grad)",class:"heartbeat-area"},null,8,It),e("path",{d:D.value,fill:"none",class:"heartbeat-bg-line"},null,8,Ct),e("path",{d:D.value,fill:"none",class:"heartbeat-line",stroke:"url(#line-grad)"},null,8,Dt),e("path",{d:D.value,fill:"none",class:"heartbeat-scan",stroke:"#fff",mask:"url(#scan-mask)"},null,8,Nt)]))])]),e("div",$t,[t[13]||(t[13]=e("div",{class:"section-label"},"STAR_MOMENTUM",-1)),e("div",Tt,[(c(),i("svg",Ot,[t[11]||(t[11]=e("defs",null,[e("linearGradient",{id:"star-grad",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"#4aa9ff","stop-opacity":"0.35"}),e("stop",{offset:"100%","stop-color":"#4aa9ff","stop-opacity":"0"})])],-1)),e("path",{d:z.value,fill:"url(#star-grad)",class:"star-area"},null,8,Pt),e("path",{d:z.value.replace(" L 0,30","").replace(" L 120,30 Z",""),fill:"none",class:"path-curve"},null,8,Bt),t[12]||(t[12]=e("circle",{cx:120,cy:12,r:"2.5",class:"glow-point"},null,-1))]))])])])]),e("footer",Ft,[e("div",Gt,[e("div",Zt,[(c(!0),i(st,null,ot(p.value,o=>(c(),i("img",{key:o.id,src:o.avatar_url,title:o.login,class:"contributor-avatar"},null,8,Ht))),128)),w.value?(c(),i("div",{key:0,class:"contributor-extra",title:h.value?"+"+h.value+" more contributors":"more contributors","aria-label":h.value?"+"+h.value+" more contributors":"more contributors",role:"img"},m(h.value?"+"+h.value:"â€¦"),9,Vt)):I("",!0)])]),t[14]||(t[14]=e("div",{class:"system-tag"},[e("span",{class:"status-dot"}),e("span",{class:"tag-code"},"DATA_STREAM::ALIVE")],-1))])]))],2))}},Jt=lt(Ut,[["__scopeId","data-v-7b824faf"]]);export{Jt as default};
