const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-Tag-2tRKCngr.js","assets/entry-index-BCWviSf7.js","assets/chunk-mermaid-lib-PTTmCi0X.js","assets/asset-index-DQTw5x8l.css","assets/chunk-_plugin-vue_export-helper-DlAUqK2U.js","assets/asset-Tag-C0RPMPKw.css","assets/chunk-IconCategory-q8df7qOg.js","assets/chunk-IconDate-Ig2q5UQG.js"])))=>i.map(i=>d[i]);
import{_ as A}from"./chunk-mermaid-lib-PTTmCi0X.js";import{r as m,i as C,f as ut,v as mt,j as ht,B as vt,b as r,o as l,e as a,c as X,q as y,l as h,u as b,F as _,m as w,t as M,a as P,d as E,w as F,G as gt,J as pt,g as ft,p as yt}from"./entry-index-BCWviSf7.js";import{_ as _t}from"./chunk-_plugin-vue_export-helper-DlAUqK2U.js";const I="/assets/asset-loading-4bFnOtMK.gif",wt={class:"post-wrapper"},kt={class:"image-border-frame"},xt=["src"],Mt={class:"content-panel"},Pt={key:0,class:"content-wrapper"},Ct={class:"main-content-area"},bt={class:"title-text"},It={class:"pre-text"},Tt={class:"meta-sidebar"},Rt={class:"meta-list"},Ut={key:0,class:"meta-item category-row"},At={class:"meta-icon-wrapper"},Et={class:"link-text"},Ft={key:1,class:"meta-item date-row"},Lt={class:"meta-icon-wrapper"},zt={class:"link-text"},St={class:"tags-container"},$t={key:0,class:"transition-overlay"},Wt={class:"radial-waves"},Bt={class:"floating-shapes"},Dt={class:"transition-content"},Vt={class:"transition-text-wrapper"},Xt={class:"transition-text"},Yt={class:"text-particles"},qt={__name:"Post",props:{imageUrl:String,markdownUrl:String},setup(Y){const q=E(()=>A(()=>import("./chunk-Tag-2tRKCngr.js"),__vite__mapDeps([0,1,2,3,4,5]))),N=E(()=>A(()=>import("./chunk-IconCategory-q8df7qOg.js"),__vite__mapDeps([6,4,1,2,3]))),j=E(()=>A(()=>import("./chunk-IconDate-Ig2q5UQG.js"),__vite__mapDeps([7,4,1,2,3]))),v=Y,u=m(v.imageUrl||I),o=m({}),g=m(""),L=m("auto"),z=m(0),S=m(0),$=m({}),W=m(!1),k=m(null);let p=null,c=[];const T=m(null);let R=null;class O{constructor(t,s){this.x=Math.random()*t,this.y=Math.random()*s,this.size=Math.random()*2+.5,this.speedX=Math.random()*.5-.25,this.speedY=Math.random()*.5-.25,this.opacity=Math.random()*.5+.2}update(t,s){this.x+=this.speedX,this.y+=this.speedY,this.x>t&&(this.x=0),this.x<0&&(this.x=t),this.y>s&&(this.y=0),this.y<0&&(this.y=s)}draw(t){t.fillStyle=`rgba(102, 126, 234, ${this.opacity})`,t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fill()}}function G(){if(!k.value)return;const e=k.value,t=e.parentElement.getBoundingClientRect();e.width=t.width,e.height=t.height,c=[];const s=Math.floor(e.width*e.height/15e3);for(let n=0;n<s;n++)c.push(new O(e.width,e.height))}function B(){if(!k.value)return;const e=k.value,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),c.forEach(s=>{s.update(e.width,e.height),s.draw(t)});for(let s=0;s<c.length;s++)for(let n=s+1;n<c.length;n++){const d=c[s].x-c[n].x,f=c[s].y-c[n].y,x=Math.sqrt(d*d+f*f);x<100&&(t.strokeStyle=`rgba(102, 126, 234, ${.1*(1-x/100)})`,t.lineWidth=.5,t.beginPath(),t.moveTo(c[s].x,c[s].y),t.lineTo(c[n].x,c[n].y),t.stroke())}p=requestAnimationFrame(B)}function H(){G(),B()}function J(e){const t=e.currentTarget.getBoundingClientRect(),s=(e.clientX-t.left)/t.width,n=(e.clientY-t.top)/t.height;z.value=s,S.value=n,$.value={left:`${e.clientX-t.left}px`,top:`${e.clientY-t.top}px`}}function K(){p&&(cancelAnimationFrame(p),p=null)}const Q=e=>{const t=e.target,s=t.naturalWidth,n=t.naturalHeight,d=s/n,f=Math.min(30,d*13);L.value=`${f}rem`};function Z(e){if(!e)return null;const t=e.split("/").filter(s=>s&&s!=="Posts");return t.length>1?t[0]:null}async function tt(e){if(e)try{const t=`/Posts/${e}/image.png`,s=new Image;s.onload=()=>{g.value=t,console.log("Collection theme loaded:",t)},s.onerror=()=>{console.log("No theme image found for collection:",e),g.value=""},s.src=t}catch(t){console.error("Failed to load collection theme:",t),g.value=""}}async function et(e){console.log("Initializing markdown with URL:",e);try{const s=(await ft.get(e.startsWith("http")?e:new URL(e,import.meta.url).href)).data,{meta:n}=await yt(s);o.value=n,o.value.date&&(o.value.date=at(o.value.date)),console.log("Metadata:",o.value)}catch(t){console.error("Failed to fetch markdown content:",t)}}function at(e){return/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(e)?e.split(" ")[0]:e}function st(e){if(console.log("Initializing image with URL:",e),e)if(e.startsWith("http")||e.startsWith("/")){u.value=I;const t=new Image;t.src=e,t.onload=()=>{u.value=e},t.onerror=()=>{console.error("Failed to load image:",e),u.value=""}}else u.value=new URL(e,import.meta.url).href;else u.value="";console.log("Image source set to:",u.value)}function nt(){u.value=I}const D=C(()=>o.value.categories&&o.value.categories.length>0?o.value.categories[o.value.categories.length-1]:""),ot=C(()=>o.value.categories&&o.value.categories.length>0?{name:"CategoryPage",params:{fullPath:o.value.categories.join("/")}}:"#"),it=C(()=>({name:"ArchivePage"})),lt=C(()=>g.value?{backgroundImage:`url(${g.value})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{});ut(()=>{if(console.log("Component mounted"),v.imageUrl&&st(v.imageUrl),v.markdownUrl){et(v.markdownUrl);const e=Z(v.markdownUrl);e&&tt(e)}});const rt=mt();function ct(){if(!T.value)return;const e=T.value,t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const s=[],n=100,d=e.width/2,f=e.height/2;for(let i=0;i<n;i++){const U=Math.PI*2*i/n;s.push({x:d,y:f,vx:Math.cos(U)*(Math.random()*3+2),vy:Math.sin(U)*(Math.random()*3+2),size:Math.random()*4+2,opacity:1,color:`hsl(${250+Math.random()*30}, 70%, ${50+Math.random()*20}%)`})}function x(){t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,e.width,e.height),s.forEach((i,U)=>{i.x+=i.vx,i.y+=i.vy,i.opacity-=.01,i.size*=.98,!(i.opacity<=0)&&(t.fillStyle=i.color.replace(")",`, ${i.opacity})`),t.beginPath(),t.arc(i.x,i.y,i.size,0,Math.PI*2),t.fill())}),s.some(i=>i.opacity>0)&&(R=requestAnimationFrame(x))}x()}function V(){W.value=!0,setTimeout(()=>{ct()},100),setTimeout(()=>{dt()},1200)}function dt(){const e=v.markdownUrl.split("/").filter(n=>n),t=e[e.length-1].replace(".md",""),s=e.length>2?e[1]:null;rt.push({name:"PostPage",params:{collection:s,mdName:t}})}return ht(()=>{p&&cancelAnimationFrame(p),R&&cancelAnimationFrame(R)}),(e,t)=>{const s=vt("router-link");return l(),r("div",wt,[a("div",{class:"post-panel",onMouseenter:H,onMousemove:J,onMouseleave:K,style:h({"--mouse-x":z.value,"--mouse-y":S.value})},[g.value?(l(),r("div",{key:0,class:"collection-theme-bg",style:h(lt.value)},null,4)):y("",!0),a("canvas",{ref_key:"particleCanvas",ref:k,class:"particle-canvas"},null,512),a("div",{class:"glow-orb",style:h($.value)},null,4),u.value&&u.value!==b(I)?(l(),r("div",{key:1,class:"image-panel",style:h({width:L.value})},[a("div",kt,[a("img",{src:u.value,alt:"Image",onLoad:Q,onError:nt},null,40,xt),t[0]||(t[0]=a("div",{class:"image-shimmer"},null,-1))])],4)):y("",!0),a("div",Mt,[t[8]||(t[8]=a("div",{class:"deco-geometry"},[a("div",{class:"deco-circle"}),a("div",{class:"deco-triangle"})],-1)),o.value?(l(),r("div",Pt,[a("div",Ct,[a("div",{class:"title-panel",onClick:V},[a("p",bt,[(l(!0),r(_,null,w(o.value.title,(n,d)=>(l(),r("span",{key:d,class:"title-char",style:h({"--char-index":d})},M(n===" "?" ":n),5))),128))]),t[1]||(t[1]=a("div",{class:"title-underline"},null,-1))]),a("div",{class:"pre-panel",onClick:V},[a("pre",It,M(o.value.pre),1),t[2]||(t[2]=a("div",{class:"pre-gradient-overlay"},null,-1))])]),a("div",Tt,[a("div",Rt,[D.value?(l(),r("div",Ut,[a("div",At,[P(b(N),{class:"meta-icon"}),t[3]||(t[3]=a("div",{class:"icon-ripple"},null,-1))]),P(s,{to:ot.value,class:"meta-link"},{default:F(()=>[a("span",Et,M(D.value),1),t[4]||(t[4]=a("span",{class:"link-arrow"},"→",-1))]),_:1},8,["to"])])):y("",!0),o.value.date?(l(),r("div",Ft,[a("div",Lt,[P(b(j),{class:"meta-icon"}),t[5]||(t[5]=a("div",{class:"icon-ripple"},null,-1))]),P(s,{to:it.value,class:"meta-link"},{default:F(()=>[a("span",zt,M(o.value.date),1),t[6]||(t[6]=a("span",{class:"link-arrow"},"→",-1))]),_:1},8,["to"])])):y("",!0)]),t[7]||(t[7]=a("div",{class:"props-divider"},[a("div",{class:"divider-glow"})],-1)),a("div",St,[(l(!0),r(_,null,w(o.value.tags,(n,d)=>(l(),X(b(q),{key:d,tagname:n,style:h({"--tag-index":d}),class:"animated-tag"},null,8,["tagname","style"]))),128))])])])):y("",!0),t[9]||(t[9]=a("div",{class:"scan-line"},null,-1))])],36),(l(),X(pt,{to:"body"},[P(gt,{name:"page-transition"},{default:F(()=>[W.value?(l(),r("div",$t,[a("canvas",{ref_key:"transitionCanvas",ref:T,class:"transition-canvas"},null,512),a("div",Wt,[(l(),r(_,null,w(5,n=>a("div",{class:"wave",key:n,style:h({"--wave-delay":n*.1+"s"})},null,4)),64))]),a("div",Bt,[(l(),r(_,null,w(8,n=>a("div",{class:"shape shape-circle",key:"c"+n,style:h({"--shape-delay":Math.random()*.5+"s","--shape-x":Math.random()*100+"%","--shape-y":Math.random()*100+"%"})},null,4)),64)),(l(),r(_,null,w(6,n=>a("div",{class:"shape shape-square",key:"s"+n,style:h({"--shape-delay":Math.random()*.5+"s","--shape-x":Math.random()*100+"%","--shape-y":Math.random()*100+"%"})},null,4)),64))]),a("div",Dt,[t[10]||(t[10]=a("div",{class:"transition-spinner"},[a("div",{class:"spinner-ring"}),a("div",{class:"spinner-ring"}),a("div",{class:"spinner-ring"})],-1)),a("div",Vt,[a("p",Xt,M(o.value.title),1),a("div",Yt,[(l(),r(_,null,w(20,n=>a("span",{key:n,class:"text-particle",style:h({"--particle-delay":Math.random()*.3+"s","--particle-angle":Math.random()*360+"deg"})},null,4)),64))])]),t[11]||(t[11]=a("div",{class:"loading-bar"},[a("div",{class:"loading-progress"})],-1))])])):y("",!0)]),_:1})]))])}}},Gt=_t(qt,[["__scopeId","data-v-28b9daa9"]]);export{Gt as default};
