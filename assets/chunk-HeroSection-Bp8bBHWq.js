import{r as m,i as k,f as P,j as A,b as I,o as S,e as g,t as D,m as T,O,s as V,h as c,v as W,l as Y,u as y,a as q,F as j,k as U,c as X,U as R}from"./entry-index-D8c4lH7g.js";import{_ as E}from"./chunk-_plugin-vue_export-helper-DlAUqK2U.js";import"./chunk-mermaid-lib--N4Maba6.js";const G={class:"typewriter-text"},J={__name:"TypewriterText",props:{texts:{type:Array,required:!0,default:()=>[""]},color:{type:String,default:"#ffffff"},typingSpeed:{type:Number,default:100},deletingSpeed:{type:Number,default:50},pauseDuration:{type:Number,default:2e3}},setup($){const u=$,f=m(""),x=m(0),n=m(!1),h=m(0);let l=null;const _=k(()=>u.texts[x.value]||""),v=()=>{const b=_.value;n.value?h.value>0?(h.value--,f.value=b.substring(0,h.value),l=setTimeout(v,u.deletingSpeed)):(n.value=!1,x.value=(x.value+1)%u.texts.length,l=setTimeout(v,500)):h.value<b.length?(f.value=b.substring(0,h.value+1),h.value++,l=setTimeout(v,u.typingSpeed)):l=setTimeout(()=>{if(u.texts.length>1)n.value=!0,v();else return},u.pauseDuration)};return P(()=>{v()}),A(()=>{l&&clearTimeout(l)}),(b,B)=>(S(),I("div",G,[g("span",{class:"text-content",style:T({color:$.color})},D(f.value),5),g("span",{class:"cursor",style:T({backgroundColor:$.color})},"|",4)]))}},F=E(J,[["__scopeId","data-v-0bf34cf9"]]),K=["data-theme"],Q={class:"hero-content"},Z={class:"hero-subtitle-container"},ee={key:0,class:"hero-bottom-panels"},te=O({name:"HeroSection",components:{TypewriterText:F}}),ae=Object.assign(te,{setup($){const u=m(0),f=m(0),x=m(!1),n=m(null);let h=null,l=[];const _=k(()=>V.currentTheme.value),v=()=>{u.value=window.scrollY},b=k(()=>{const t=f.value,e=Math.min(u.value/t,1);return{filter:`blur(${c.BackgroundImgBlur*e}px)`}}),B=k(()=>{const t=f.value,e=Math.min(u.value/t,1);return{opacity:c.BackgroundImgOpacity*e}}),s=m({main:"#ffffff",shadow:"#000000"});class N{constructor(e,a){this.x=Math.random()*e,this.y=Math.random()*a,this.size=Math.random()*4+2,this.speedX=Math.random()*1.5-.75,this.speedY=Math.random()*1.5-.75,this.opacity=Math.random()*.4+.6}update(e,a){this.x+=this.speedX,this.y+=this.speedY,this.x>e&&(this.x=0),this.x<0&&(this.x=e),this.y>a&&(this.y=0),this.y<0&&(this.y=a)}draw(e,a){e.shadowBlur=15,e.shadowColor=a,e.fillStyle=a,e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.globalAlpha=1}}P(()=>{f.value=window.innerHeight,window.addEventListener("scroll",v),L(),setTimeout(()=>{z(),H()},300)}),A(()=>{window.removeEventListener("scroll",v),h&&cancelAnimationFrame(h)});const z=()=>{if(!n.value||x.value)return;const t=n.value;t.width=window.innerWidth,t.height=window.innerHeight,l=[];const e=window.innerWidth<768?60:120;for(let a=0;a<e;a++)l.push(new N(t.width,t.height));x.value=!0},H=()=>{if(!n.value)return;const t=n.value,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height);let a;const p=_.value;s.value.main!=="#ffffff"&&s.value.main!=="#000000"?(a=s.value.main.includes("rgb")?s.value.main.replace("rgb","rgba").replace(")",", 0.9)"):s.value.main+"E6",s.value.main):p==="dark"||p==="night"?a="rgba(167, 139, 250, 0.9)":a="rgba(102, 126, 234, 0.9)",l.forEach(r=>{r.update(t.width,t.height),r.draw(e,a)}),l.forEach((r,d)=>{l.slice(d+1).forEach(o=>{const i=r.x-o.x,w=r.y-o.y,C=Math.sqrt(i*i+w*w);C<200&&(e.strokeStyle=a,e.lineWidth=1.5,e.globalAlpha=(1-C/200)*.5,e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(o.x,o.y),e.stroke(),e.globalAlpha=1)})}),h=requestAnimationFrame(H)};window.addEventListener("resize",()=>{n.value&&(n.value.width=window.innerWidth,n.value.height=window.innerHeight)}),W(_,()=>{});const L=()=>{const t=new Image;t.crossOrigin="Anonymous",t.src=c.HeroBackgroundImg||c.BackgroundImg,t.onload=()=>{const e=document.createElement("canvas"),a=e.getContext("2d");e.width=t.width,e.height=t.height,a.drawImage(t,0,0);try{const r=a.getImageData(0,0,e.width,e.height).data;let d=0,o=0,i=0,w=0;for(let M=0;M<r.length;M+=40)d+=r[M],o+=r[M+1],i+=r[M+2],w++;d=Math.floor(d/w),o=Math.floor(o/w),i=Math.floor(i/w),(d*299+o*587+i*114)/1e3<128?(s.value.main=`rgb(${Math.min(255,d+100)}, ${Math.min(255,o+100)}, ${Math.min(255,i+100)})`,s.value.shadow=`rgb(${d}, ${o}, ${i})`):(s.value.main=`rgb(${d}, ${o}, ${i})`,s.value.shadow=`rgb(${Math.max(0,d-100)}, ${Math.max(0,o-100)}, ${Math.max(0,i-100)})`)}catch(p){console.warn("无法提取背景图片颜色，使用默认颜色",p)}},t.onerror=()=>{console.warn("背景图片加载失败，使用默认颜色")}};return(t,e)=>(S(),I("div",{class:"hero-section","data-theme":_.value},[g("div",{class:"hero-background-blur",style:T(b.value)},null,4),g("div",{class:"hero-overlay",style:T(B.value)},null,4),g("canvas",{ref_key:"particleCanvas",ref:n,class:"particles-canvas"},null,512),g("div",Q,[g("h1",{class:"hero-title",style:T({color:s.value.main,textShadow:`
            0 0 10px ${s.value.shadow},
            0 0 20px ${s.value.shadow},
            0 0 30px ${s.value.shadow},
            0 0 40px ${s.value.shadow},
            2px 2px 4px rgba(0,0,0,0.8),
            -2px -2px 4px rgba(255,255,255,0.3)
          `})},D(y(c).HeroTitle||y(c).BlogName),5),g("div",Z,[q(F,{texts:y(c).HeroSubtitles||[y(c).ShortDesc],color:s.value.main},null,8,["texts","color"])])]),y(c).HeroPanels&&y(c).HeroPanels.length>0?(S(),I("div",ee,[(S(!0),I(j,null,U(y(c).HeroPanels,(a,p)=>(S(),X(R(a),{key:p}))),128))])):Y("",!0)],8,K))}}),le=E(ae,[["__scopeId","data-v-5917cce8"]]);export{le as default};
