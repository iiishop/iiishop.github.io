import{r as n,b as i,d as c,f as t,v as u,B as _,D as k,E as w,t as p}from"./index-qtUGr3fY.js";import{d as b}from"./crypto-f2ygeWEU.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h={class:"crypto-unlock"},x={class:"unlock-card"},C={class:"password-input-group"},U=["disabled"],B=["disabled"],D={key:0,class:"error-message"},E={key:1,class:"progress-bar"},V={__name:"CryptoUnlock",props:{encryptedUrl:{type:String,required:!0}},emits:["unlocked"],setup(v,{emit:y}){const m=v,f=y,o=n(""),r=n(!1),a=n(""),d=async()=>{if(!o.value){a.value="è¯·è¾“å…¥å¯†ç ";return}r.value=!0,a.value="";try{const s=await fetch(m.encryptedUrl);if(!s.ok)throw new Error("æ— æ³•åŠ è½½åŠ å¯†æ–‡ç« ");const e=await s.text(),l=await b(e,o.value);f("unlocked",l)}catch(s){console.error("è§£å¯†å¤±è´¥:",s),s.message.includes("authentication")||s.message.includes("å¯†ç é”™è¯¯")?a.value="å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•":a.value=`è§£å¯†å¤±è´¥: ${s.message}`,o.value=""}finally{r.value=!1}};return(s,e)=>(c(),i("div",h,[t("div",x,[e[2]||(e[2]=t("div",{class:"lock-icon"},"ğŸ”’",-1)),e[3]||(e[3]=t("h2",null,"æ­¤æ–‡ç« éœ€è¦å¯†ç è®¿é—®",-1)),e[4]||(e[4]=t("p",{class:"hint"},"è¿™æ˜¯ä¸€ç¯‡åŠ å¯†æ–‡ç« ï¼Œè¯·è¾“å…¥å¯†ç ä»¥æŸ¥çœ‹å†…å®¹",-1)),t("div",C,[_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),type:"password",placeholder:"è¯·è¾“å…¥å¯†ç ",onKeyup:w(d,["enter"]),disabled:r.value,class:"password-input"},null,40,U),[[k,o.value]]),t("button",{onClick:d,disabled:r.value||!o.value,class:"unlock-button"},p(r.value?"è§£å¯†ä¸­...":"è§£é”"),9,B)]),a.value?(c(),i("div",D,p(a.value),1)):u("",!0),r.value?(c(),i("div",E,e[1]||(e[1]=[t("div",{class:"progress-fill"},null,-1)]))):u("",!0)])]))}},T=g(V,[["__scopeId","data-v-44cbb333"]]);export{T as default};
